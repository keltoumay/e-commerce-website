"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[5],{6663:function(e,t,i){i.r(t),i.d(t,{realtimeEventsForSubscription:function(){return n}});var o=i(1906),s=i(1922),r=i(40);function n(e){return(0,s.getRealtimeMessagesObservable)().pipe((0,o.filter)((t=>r.get(t,"data.subscription.id")===e)))}},6659:function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var o,s=i(1),r=i(2057),n=i(2491),a=i(40);let l=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.renderButton=this.renderButton.bind(this)}renderButton(){if(this.props.buttonText)return s.createElement(n.Button,{type:"secondary",onClick:this.props.handler},this.props.buttonText)}render(){return s.createElement("div",{className:"sidebar-error-wrapper"},s.createElement("div",{className:"sidebar-error-thumbnail"}),s.createElement("div",{className:"sidebar-error-content-container"},s.createElement("div",{className:"sidebar-error-header"},this.props.title),s.createElement("div",{className:"sidebar-error-content"},this.props.description),this.renderButton()))}})||o;l.defaultProps={description:null,buttonText:null,handler:a.noop}},6662:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o=i(1851),s=i(1681),r=i(6663),n=i(1773),a=i(3978),l=i(40);class d extends a.default{getListAndSubscribeAPIEndpoint(){throw new Error(`${this.constructor.name}~getListAndSubscribeAPIEndpoint: not implemented`)}getListAPIEndpoint(){throw new Error(`${this.constructor.name}~getListAPIEndpoint: not implemented`)}hydrate(e=!0){return new Promise(((t,i)=>{this._connection_subscription=(0,o.getSocketConnectionObservable)().subscribe((o=>{if("connect"===o)return this._getAPIResponse().then((t=>{const i=l.get(t,"body.data",[]),o=l.get(t,"body.subscription.id");this._hydrateEntities(i),e&&o&&this._subscribeToChangeEvents(o)})).then((()=>t())).catch((e=>(pm.logger.warn("ListingAPIAdapter~hydrate: Failed to hydrate entities",e),i(e))))}))}))}dispose(){super.dispose(),this._connection_subscription&&this._connection_subscription.unsubscribe(),this._realtime_subscription&&this._realtime_subscription.unsubscribe()}_hydrateEntities(e){this.model.hydrate&&this.model.hydrate(e)}_removeEntities(e){l.isEmpty(e)||this.model.remove&&this.model.remove(e)}_addEntities(e){l.isEmpty(e)||this.model.add&&this.model.add(e)}async _getAPIResponse(){return await(0,n.getStore)("SyncStatusStore").onSyncAvailable(),s.default.request(this.getListAndSubscribeAPIEndpoint(),{method:"POST",timeout:3e4})}_subscribeToChangeEvents(e){this._realtime_subscription&&this._realtime_subscription.unsubscribe(),this._realtime_subscription=(0,r.realtimeEventsForSubscription)(e).subscribe((e=>{const t=l.get(e,"data.data",[]),i=t.filter((({action:e})=>["create","update"].includes(e))).map((({id:e})=>e)),o=t.filter((({action:e})=>"delete"===e)).map((({id:e})=>e));this._removeEntities(o),this._createOrUpdateEntities(i)}))}async _createOrUpdateEntities(e){if(l.isEmpty(e))return;await(0,n.getStore)("SyncStatusStore").onSyncAvailable();const t=await s.default.request(this.getListAPIEndpoint(),{method:"POST",data:{ids:e},timeout:3e4}),i=l.get(t,"body.data",[]);this._addEntities(i)}}},6661:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o=i(1773),s=i(1664),r=i(1665),n=i(3831),a=i(6662),l=i(40);class d extends a.default{getListAndSubscribeAPIEndpoint(){const e=(0,o.getStore)("ActiveWorkspaceStore").id;return n.COLLECTION_LIST_AND_SUBSCRIBE`${e}`}getListAPIEndpoint(){const e=(0,o.getStore)("ActiveWorkspaceStore").id;return n.COLLECTION_LIST`${e}`}dispose(){super.dispose(),this.unsubscribeModelEvents&&this.unsubscribeModelEvents()}_subscribeToChangeEvents(e){super._subscribeToChangeEvents(e),this.unsubscribeModelEvents&&this.unsubscribeModelEvents(),this.unsubscribeModelEvents=null,this.unsubscribeModelEvents=pm.eventBus.channel("model-events").subscribe((e=>{if("collection"!==(0,s.getEventNamespace)(e))return;const t=(0,s.getEventName)(e);if(!["favorite","unfavorite"].includes(t))return;const i=(0,s.getEventData)(e),o=l.get(i,"collection.id"),n=l.get(i,"collection.owner"),a=(0,r.composeUID)(o,n),d="favorite"===t;this.model.updateFavorite&&this.model.updateFavorite(a,d)}))}}},6660:function(e,t,i){i.r(t),i.d(t,{default:function(){return I}});var o,s,r=i(960),n=i(1773),a=i(1892),l=i(6641),d=i(3981),c=i(3976),p=i(5914),h=i(5938),u=i(6661),m=i(4105),g=i(5623),f=i(3831),b=i(40);function E(e,t,i,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,o){return o(e,t,i)||i}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let I=(s=E((o=class{constructor(){var e,t,i,o;this.model=null,this._adapters=[],e=this,t="status",o=this,(i=s)&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}async didCreate(){this.model=new l.default;try{this.setSidebarStatus(m.READY),await this._loadFromModelEventsAdapter()}catch(e){return pm.logger.error("CollectionSidebarController~didCreate: Error in loading collections from model events",e),this.setSidebarStatus(m.ERROR)}return this.setSidebarStatus(m.READY)}beforeDestroy(){this._adapters&&this._adapters.forEach((e=>{b.isFunction(e.dispose)&&e.dispose()})),this.model=null,this._adapters=[]}setSidebarStatus(e){this.status=e}async _fetchCollections(){await(0,n.getStore)("SyncStatusStore").onSyncAvailable();const e=(0,n.getStore)("ActiveWorkspaceStore").id,t=await g.RemoteSyncRequestService.request(f.COLLECTION_LIST`${e}`,{method:"POST",timeout:3e4}),i=b.forEach(b.get(t,"body.data",[]),(e=>{const t={model:"collection",modelId:e.id,action:"UPDATE_COLLECTION"},i=a.default.getCompositeKey(t);!(0,n.getStore)("PermissionStore").members.has(i)&&b.set(e,"attributes.permissions.userCanUpdate",!0)}));return this.model.hydrate&&this.model.hydrate(i),i}async _loadFromModelEventsAdapter(){const e=(0,n.getStore)("ActiveWorkspaceStore").id,t=new d.default(this.model.getCollectionAdapterModel(),{activeWorkspace:e,useUID:!0}),i=new c.default(this.model.getFolderAdapterModel()),o=new p.default(this.model.getRequestAdapterModel()),s=[t.hydrate(),i.hydrate(),o.hydrate()];this._adapters.push(t,i,o),await Promise.all(s),this.setSidebarStatus(m.READY);const r=new h.default(this.model.getResponseAdapterModel());this._adapters.push(r),await r.hydrate()}async _loadFromListingAPIAdapter(){const e=new u.default(this.model.getCollectionAdapterModel());this._adapters.push(e),await e.hydrate()}}).prototype,"status",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.LOADING}}),E(o.prototype,"setSidebarStatus",[r.action],Object.getOwnPropertyDescriptor(o.prototype,"setSidebarStatus"),o.prototype),o)},6643:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var o,s=i(1),r=i(2057),n=i(2831),a=i(4620),l=i(960),d=i(2493),c=i.n(d),p=i(2744),h=i(2536),u=i(6644),m=i(6647),g=i(6649),f=i(6651),b=i(6653),E=i(6654),I=i(2049),O=(i(6641),i(3820)),C=i(3819),_=i(6655),S=i(40);const y="empty",T="loading";let v=c()(o=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.handleDragDrop=this.handleDragDrop.bind(this),this.handleCreateRequest=this.handleCreateRequest.bind(this),this.getListItem=this.getListItem.bind(this),this.getItemSize=this.getItemSize.bind(this),this.observeSizeChange=this.observeSizeChange.bind(this),this.unobserveSizeChange=this.unobserveSizeChange.bind(this),this.scrollToItemById=this.scrollToItemById.bind(this),this.debouncedOpenActiveItemInTab=S.debounce(this.openActiveItemInTab.bind(this),200),this.handleClickOutside=this.handleClickOutside.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.mouseDownInsideInlineInput=!1,this.heightSetForEmptyItems={},this.heightReactionDisposer=(0,l.reaction)((()=>S.get(this.props.model,"items")),(()=>{this.listRef&&this.listRef.resetAfterIndex(0)})),this.focusReactionDisposer=(0,l.reaction)((()=>S.get(this.props.model,"activeItem")),(e=>{e&&requestIdleCallback(this.scrollToItemById.bind(this,e.id))})),this.resizeObserver=new ResizeObserver((e=>{for(const t of e){if(!(t&&t.target&&t.target.dataset))return;const{index:e}=t.target.dataset;this.heightSetForEmptyItems[e]=t.target.offsetHeight}this.listRef.resetAfterIndex(0)})),this.editCache=null}componentWillUnmount(){this.heightReactionDisposer&&this.heightReactionDisposer(),this.focusReactionDisposer&&this.focusReactionDisposer(),this.props.model.activeItem&&this.props.model.activeItem.commitCachedRename(),clearTimeout(this.clearCollectionLoadingTimer)}getListItem({index:e,style:t}){const{model:i}=this.props,o=S.get(i,["items",e]),r=e&&S.get(i,["items",e-1]),{activeItem:n}=i;if(!o)return pm.logger.warn("CollectionSideBarListContainer~getListItem","Could not find any item at index",e),null;const a=i.isFocused(o.id),l={};switch(o.type===y&&(o.parent=r),n&&(l.show=this.shouldShowIndent(o,n),l.depth=n.depth-1),o.type){case T:return s.createElement("div",{className:"collection-virtualized-list-item__loading",style:t},s.createElement(_.default,{depth:o.depth,activeIndent:l}));case y:{const n=r.type===O.COLLECTION?r:i.getParentCollection(r);return s.createElement("div",{className:"collection-virtualized-list-item__empty",style:t},s.createElement(E.default,{parent:r,canAddRequest:n.userCanUpdate,depth:o.depth,index:e,observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,onAddRequest:this.handleCreateRequest,activeIndent:l}))}case O.COLLECTION:return s.createElement("div",{className:"collection-virtualized-list-item__head",style:t},s.createElement(h.default,{identifier:o.xpath,key:o.xpath},s.createElement(b.default,{key:o.id,item:o,model:i,persistentState:o._persistentState,onDragDrop:this.handleDragDrop})));case O.FOLDER:{const e=o.$collection;return s.createElement("div",{className:"collection-virtualized-list-item__folder",style:t},s.createElement(h.default,{identifier:o.xpath,key:o.xpath},s.createElement(m.default,{key:o.id,model:i,item:o,persistentState:o._persistentState,collection:e,isFocused:a,onDragDrop:this.handleDragDrop,activeIndent:l})))}case O.REQUEST:{const e=o.$collection;return s.createElement("div",{className:"collection-virtualized-list-item__request",style:t},s.createElement(h.default,{identifier:o.xpath,key:o.xpath},s.createElement(g.default,{key:o.id,model:i,item:o,persistentState:o._persistentState,collection:e,isFocused:a,isFirstChild:r&&r.depth<o.depth,onDragDrop:this.handleDragDrop,activeIndent:l})))}case O.RESPONSE:{const e=o.$collection;return s.createElement("div",{className:"collection-virtualized-list-item__example",style:t},s.createElement(h.default,{identifier:o.xpath,key:o.xpath},s.createElement(f.default,{key:o.id,model:i,item:o,persistentState:o._persistentState,collection:e,isFocused:a,isFirstChild:r&&r.depth<o.depth,onDragDrop:this.handleDragDrop,activeIndent:l})))}default:return null}}getItemSize(e){const t=S.get(this.props.model,["items",e]);return t?t.type===y?this.heightSetForEmptyItems[e]||52:28:0}getKeyMapHandlers(){return{nextItem:pm.shortcuts.handle("nextItem",this.focusNextShortcut.bind(this)),prevItem:pm.shortcuts.handle("prevItem",this.focusPrevShortcut.bind(this)),expandItem:pm.shortcuts.handle("expandItem",this.expandItemShortcut.bind(this)),collapseItem:pm.shortcuts.handle("collapseItem",this.collapseItemShortcut.bind(this)),select:pm.shortcuts.handle("select",this.selectItemShortcut.bind(this)),cut:pm.shortcuts.handle("cut",this.cutItemShortcut.bind(this)),copy:pm.shortcuts.handle("copy",this.copyItemShortcut.bind(this)),paste:pm.shortcuts.handle("paste",this.pasteItemShortcut.bind(this)),duplicate:pm.shortcuts.handle("duplicate",this.duplicateItemShortcut.bind(this)),delete:pm.shortcuts.handle("delete",this.deleteItemShortcut.bind(this)),rename:pm.shortcuts.handle("rename",this.handleRenameShortcut.bind(this)),search:pm.shortcuts.handle("search"),quit:pm.shortcuts.handle("quit",this.handleQuitShortcut.bind(this))}}observeSizeChange(e){this.resizeObserver&&this.resizeObserver.observe(e)}unobserveSizeChange(e,t){this.resizeObserver&&this.resizeObserver.unobserve(e),delete this.heightSetForEmptyItems[t]}handleQuitShortcut(){this.props.model.activeItem&&this.props.model.activeItem.cancelRename()}handleClickOutside(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className),{activeItem:i}=this.props.model,o=this.mouseDownInsideInlineInput&&!t;this.mouseDownInsideInlineInput=!1,o?e&&e.stopPropagation():!t&&i&&i._persistentState.isEditing&&(this.props.model.activeItem&&this.props.model.activeItem.commitCachedRename(),e&&e.stopPropagation())}handleRenameShortcut(){const{activeItem:e}=this.props.model;e&&e.handleAction(C.ACTION_TYPE_RENAME_TOGGLE)}shouldShowIndent(e,t){if(!t||!e)return!1;const i=this.props.model.getParent(t);if(!i)return!1;if(i.id===e.id)return!0;const o=e.type===y||e.type===T?e.parent:this.props.model.getParent(e);return!!o&&this.shouldShowIndent(o,t)}scrollToItemById(e){if(!e)return;const t=S.findIndex(S.get(this.props.model,"items"),(t=>t.id===e));t<0||this.listRef&&this.listRef.scrollToItem(t)}focus(){this.sidebarListRef&&this.sidebarListRef.focus()}openActiveItemInTab(){const{model:e}=this.props;e.activeItem&&e.activeItem.openInTab()}focusNextShortcut(e){e&&e.preventDefault();const{model:t}=this.props;t.focusNextItem(),this.debouncedOpenActiveItemInTab()}focusPrevShortcut(e){e&&e.preventDefault();const{model:t}=this.props;t.focusPreviousItem(),this.debouncedOpenActiveItemInTab()}expandItemShortcut(e){e&&e.preventDefault();const{model:t}=this.props||{},{activeItem:i}=t||{};i&&t.expandItem(i)}collapseItemShortcut(e){e&&e.preventDefault();const{model:t}=this.props||{},{activeItem:i}=t||{};if(!i)return;if(t.isOpen(i.id))return t.collapseItem(i);const o=t.getParent(i);o&&(t.isOpen(o.id)?t.collapseItem(o):t.focusItem(o))}selectItemShortcut(e){const{activeItem:t}=this.props.model;t&&(t.commitCachedRename(),e&&e.preventDefault(),t.type===O.REQUEST&&t.handleAction(C.ACTION_TYPE_SELECT,{returnKey:!0}))}cutItemShortcut(){const{model:e}=this.props||{},{activeItem:t}=e||{};if(e&&t){switch(t.type){case O.REQUEST:case O.FOLDER:if(!t.$collection.userCanUpdate)return pm.toasts.error("You do not have permissions required to perform the action.");break;default:return}e.cutItem()}}copyItemShortcut(){const{model:e}=this.props||{};e.copyItem()}pasteItemShortcut(){const{model:e}=this.props||{};return!(!e||!e.clipboard)&&((0,I.isWorkspaceMember)()?void e.pasteItem():(0,I.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,I.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"collection_sidebar",origin:"paste_item"}))}duplicateItemShortcut(){const{activeItem:e}=this.props.model||{};e&&e.handleAction(C.ACTION_TYPE_DUPLICATE)}deleteItemShortcut(e){const{activeItem:t}=this.props.model||{};t&&!t._persistentState.isEditing&&(e&&e.preventDefault(),t.handleAction(C.ACTION_TYPE_DELETE))}handleDragDrop(e,t,i){"tab"===t.type&&"runner"===t.id||e.id!==t.id&&(("request"===t.type&&"request"===e.type||"response"===t.type&&"response"===e.type)&&"on"===i&&(i="before"),this.props.model.reorder(e,t,i))}handleCreateRequest(e){return e.handleAction(C.ACTION_TYPE_ADD_REQUEST)}handleMouseDown(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className);this.mouseDownInsideInlineInput=!!t}render(){const e=S.get(this.props.model,"items");if(S.isEmpty(e)){const e=S.get(this.props.model,"searchQuery");return s.createElement(u.default,{query:e})}const t=e=>s.createElement(r.Observer,null,this.getListItem.bind(this,e)),i=({height:i,width:o})=>s.createElement(r.Observer,null,(()=>s.createElement(n.VariableSizeList,{height:i,itemCount:e.length,itemSize:this.getItemSize,width:o,ref:e=>{this.listRef=e},overscanCount:5,className:"collection-sidebar-list__list"},t)));return s.createElement(p.default,{handlers:this.getKeyMapHandlers()},s.createElement("div",{className:"collection-sidebar-list",ref:e=>{this.sidebarListRef=e},onMouseDown:this.handleMouseDown,onClickCapture:this.handleClickOutside},s.createElement(a.default,null,i)))}})||o)||o},6644:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var o,s=i(1),r=i(2057),n=i(3009),a=i(1773),l=i(3832),d=i(6645),c=i(6646);let p=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.handleCreateCollection=this.handleCreateCollection.bind(this)}getTooltipText(e,t){if(!e)return"You do not have permissions to perform this action."}handleCreateCollection(){this.props.onClose&&this.props.onClose(),(0,l.createCollection)()}isCollectionAddEnabled(e,t){return e}render(){const e=(0,a.getStore)("PermissionStore"),t=(0,a.getStore)("ActiveWorkspaceStore").id,i=e.can("addCollection","workspace",t),{isLoggedIn:o}=(0,a.getStore)("CurrentUserStore");return this.props.query?s.createElement(c.default,{searchQuery:this.props.query,illustration:s.createElement(n.IllustrationNoCollection,null)}):s.createElement(d.default,{illustration:s.createElement(n.IllustrationNoCollection,null),title:"You don’t have any collections",message:"Collections let you group related requests, making them easier to access and run.",action:{label:"Create Collection",handler:this.handleCreateCollection,tooltip:this.getTooltipText(i,o)},hasPermissions:this.isCollectionAddEnabled(i,o)})}})||o;p.defaultProps={query:null,onClose:null}},6654:function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var o=i(1),s=i(4),r=i(2061),n=i.n(r),a=i(2491),l=i(3820),d=i(40);class c extends o.Component{componentDidMount(){this.selfNode=(0,s.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}render(){const{parent:e}=this.props,t=e.type===l.COLLECTION;return o.createElement("div",{className:"collection-sidebar-list-item__body--empty","data-index":this.props.index},d.times(this.props.depth,(e=>o.createElement("div",{key:`indent-${e}`,className:n()("collection-sidebar__indent",{"active-indent":e===Number(this.props.activeIndent.depth)&&this.props.activeIndent.show})}))),o.createElement("div",{className:n()("collection-sidebar-list__empty-item__content",{"collection-sidebar-list__empty-item__content__for-collection":t})},`This ${e.type} is empty`,this.props.canAddRequest&&o.createElement("div",null,o.createElement(a.Button,{type:"text",className:"learn-more-link",onClick:()=>this.props.onAddRequest(this.props.parent)},"Add a request"),"to start working.")))}}c.defaultProps={observeSizeChange:null,unobserveSizeChange:null,onAddRequest:d.noop,canAddRequest:!1}},6651:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var o,s=i(1),r=i(4),n=i(2061),a=i.n(n),l=i(2071),d=i.n(l),c=i(2846),p=i(2064),h=i(2057),u=i(1773),m=i(3918),g=i(3004),f=i(2536),b=i(3819),E=i(6641),I=i(2049),O=i(6648),C=i(6652),_=i(40);const S=e=>{const t=(0,r.findDOMNode)(e).getBoundingClientRect();return t.top+t.height/2},y={canDrag(e){return!e.item._persistentState.isEditing&&((0,I.isWorkspaceMember)()&&e.collection.userCanUpdate)},beginDrag(e){return{id:e.item.id,type:"response",request:e.item.request}},endDrag(e,t){const i=t.getItem(),{dropItem:o,position:s}=t.getDropResult()||{};_.isUndefined(o)||e.onDragDrop(i,o,s)}},T={hover(e,t,i){const{persistentState:o}=e,s=t.getItem().id,r=e.item.id,n="response"===t.getItem().type&&e.collection.userCanUpdate;if(s===r||!n)return{};e.isFirstChild?t.getClientOffset().y>S(i)?o.scheduleHoverUpdate("bottom"):o.scheduleHoverUpdate("top"):o.scheduleHoverUpdate("bottom")},drop(e,t,i){const o=t.getItem().id,s=e.item.id,r="response"===t.getItem().type&&e.collection.userCanUpdate;if(o===s||!r)return{};let n="after";return e.isFirstChild&&(n=t.getClientOffset().y>S(i)?"after":"before"),{dropItem:{id:e.item.id,type:"response",request:e.item.request},position:n}}};let v=(0,m.default)([{label:"Rename",shortcut:"rename",isVisible(e){return(0,u.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_RENAME_TOGGLE)}},{label:"Duplicate",shortcut:"duplicate",isVisible(e){return(0,u.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_DUPLICATE)}},{label:"Delete",shortcut:"delete",isVisible(e){return(0,u.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))(o=(0,c.DropTarget)("collection-sidebar-response-item",T,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})})))(o=(0,c.DragSource)("collection-sidebar-response-item",y,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(o=(0,h.observer)(o=class extends O.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return a()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__request":!0,"is-active":this.props.selected})}getHeadClasses(){return a()({"collection-sidebar-list-item__request__head":!0,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":(this.props.persistentState.dropHover||this.props.persistentState.dropHoverBottom)&&this.props.isDragOver,"is-hovered":this.props.persistentState.dropdownOpen,"is-selected":this.props.selected,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging})}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,item:o,persistentState:r}=this.props,n=o.depth;return super.render(this.getClasses(),t(i(e(s.createElement("div",{className:this.getHeadClasses(),title:o.name,onClick:this.onItemClick},_.times(n,(e=>s.createElement("div",{key:`indent-${e}`,className:a()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),s.createElement("div",{className:"collection-sidebar-list-item__example-icon__wrapper"},s.createElement(p.default,{name:"icon-entity-example-stroke",color:"content-color-secondary",className:"collection-sidebar-list-item__example-icon"})),s.createElement(f.default,{identifier:"head"},s.createElement("div",{className:"collection-sidebar-list-item__request__meta"},s.createElement(g.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__request__name",placeholder:"Example Name",ref:this.setInlineInputRef,value:o.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),s.createElement("div",{className:"collection-sidebar-list-item__request__actions"},(r.isHovered||r.dropdownOpen)&&s.createElement(f.default,{identifier:"responseOption"},s.createElement("div",{className:"collection-sidebar-request-dropdown-actions-wrapper"},s.createElement(C.default,{className:"collection-sidebar-request-actions-dropdown",actions:o.actions,onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle})))))))))}})||o)||o)||o)||o;v.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,selected:!1,isContextMenuOpen:_.noop,connectDragSource:_.noop,connectDropTarget:_.noop,connectDragPreview:_.noop},v.propTypes={collection:d().object.isRequired,item:d().object.isRequired,model:d().instanceOf(E.default).isRequired,activeIndent:d().object.isRequired,isFocused:d().bool,isDragOver:d().bool,isDragging:d().bool,selected:d().bool,isContextMenuOpen:d().func,connectDragSource:d().func,connectDropTarget:d().func,connectDragPreview:d().func}},6647:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var o,s=i(1),r=i(4),n=i(2061),a=i.n(n),l=i(2071),d=i.n(l),c=i(2846),p=i(2057),h=i(2064),u=i(3918),m=i(3004),g=i(1773),f=i(2536),b=i(2491),E=i(2049),I=i(3214),O=i(3819),C=i(6641),_=i(6648),S=i(40);const y={canDrag(e){return!e.item._persistentState.isEditing&&((0,E.isWorkspaceMember)()&&e.collection.userCanUpdate)},beginDrag(e){return{id:e.item.id,type:"folder",collection:e.item.collection}},endDrag(e,t){const i=t.getItem(),{dropItem:o,position:s}=t.getDropResult()||{};S.isUndefined(o)||e.onDragDrop(i,o,s)}},T={hover(e,t,i){const{persistentState:o}=e,s=t.getItem().id,n=e.item.id,a=t.getItem();let l=!1;if("request"!==a.type&&"folder"!==a.type||(l=e.collection.userCanUpdate),s===n||!l)return{};const d=t.getClientOffset(),c=(0,r.findDOMNode)(i).getBoundingClientRect(),p=c.top+30-7.5,h=c.top+7.5;"request"!==t.getItem().type&&d.y>p?o.scheduleHoverUpdate("bottom"):"request"!==t.getItem().type&&d.y<h?o.scheduleHoverUpdate("top"):d.y<p&&d.y>h?o.scheduleHoverUpdate("on"):o.scheduleHoverUpdate()},drop(e,t,i){const o=t.getItem().id,s=e.item.id,n=t.getItem();let a=!1;if("request"!==n.type&&"folder"!==n.type||(a=e.collection.userCanUpdate),o===s||!a)return{};const l=t.getClientOffset(),d=(0,r.findDOMNode)(i).getBoundingClientRect(),c=.25*d.height,p=d.bottom-c,h=d.top+c;let u;return"request"!==n.type&&l.y>p?u="after":"request"!==n.type&&l.y<h?u="before":l.y<p&&l.y>h&&(u="on"),{dropItem:{id:e.item.id,type:"folder",collection:e.item.collection},position:u}}};let v=(0,u.default)([{label:"Add Request",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(O.ACTION_TYPE_ADD_REQUEST)}},{label:"Add Folder",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(O.ACTION_TYPE_ADD_FOLDER)}},{label:"Rename",shortcut:"rename",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(O.ACTION_TYPE_RENAME_TOGGLE)}},{label:"Duplicate",shortcut:"duplicate",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(O.ACTION_TYPE_DUPLICATE)}},{label:"Delete",shortcut:"delete",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(O.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))(o=(0,c.DropTarget)(["collection-sidebar-request-item","collection-sidebar-folder-item"],T,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})})))(o=(0,c.DragSource)("collection-sidebar-folder-item",y,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(o=(0,p.observer)(o=class extends _.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return a()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__folder":!0,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":this.props.persistentState.dropHoverBottom&&this.props.isDragOver})}getHeadClasses(){return a()({"collection-sidebar-list-item__folder__head":!0,"is-open":this.isOpen(),"is-hovered":this.props.persistentState.dropdownOpen,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging,"is-right-above":this.props.persistentState.dropHover&&this.props.isDragOver})}getFolderIconClasses(){return a()({"pm-icon":!0,"pm-icon-normal":!0,"collection-sidebar-list-item__folder__head__icon":!0,icon_folder:!0})}isOpen(){return this.props.model.isOpen(this.props.item.id)}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,item:o,model:r,persistentState:n}=this.props,l=o.depth,d=r.isOpen(o.id)?"down":"right";return super.render(this.getClasses(),t(i(e(s.createElement("div",{title:o.name,className:this.getHeadClasses(),onClick:this.onItemClick},S.times(l,(e=>s.createElement("div",{key:`indent-${e}`,className:a()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),s.createElement(b.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},s.createElement(h.default,{name:`icon-direction-${d}`,className:"pm-icon pm-icon-normal"})),s.createElement("div",{className:"collection-sidebar-list-item__folder__icon-wrapper"},s.createElement(h.default,{name:"icon-entity-folder-stroke",className:this.getFolderIconClasses()})),s.createElement(f.default,{identifier:"head"},s.createElement("div",{className:"collection-sidebar-list-item__folder__head__meta"},s.createElement(m.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__folder__head__name",placeholder:"Folder Name",ref:this.setInlineInputRef,value:o.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),s.createElement("div",{className:"collection-sidebar-list-item__folder__head__actions"},(n.isHovered||n.dropdownOpen)&&s.createElement(f.default,{identifier:"folderOption"},s.createElement("div",{className:"collection-sidebar-folder-dropdown-actions-wrapper"},s.createElement(I.default,{className:"collection-sidebar-folder-actions-dropdown",onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle,actions:o.actions})))))))))}})||o)||o)||o)||o;v.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,isContextMenuOpen:S.noop,connectDragSource:S.noop,connectDropTarget:S.noop,connectDragPreview:S.noop},v.propTypes={collection:d().object.isRequired,item:d().object.isRequired,model:d().instanceOf(C.default).isRequired,isFocused:d().bool,isDragOver:d().bool,isDragging:d().bool,isContextMenuOpen:d().func,connectDragSource:d().func,connectDropTarget:d().func,connectDragPreview:d().func}},6653:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var o,s=i(1),r=i(2846),n=i(2071),a=i.n(n),l=i(2057),d=i(2061),c=i.n(d),p=i(2064),h=i(2491),u=i(3004),m=i(3971),g=i(3918),f=i(1773),b=i(2536),E=i(1665),I=i(4128),O=i(2049),C=i(3007),_=i(3819),S=i(6641),y=i(6648),T=i(40);let v=(0,g.default)([{label:"Add Request",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_REQUEST)}},{label:"Add Folder",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_FOLDER)}},{label:"Monitor Collection",isVisible(e){const t=(0,f.getStore)("PermissionStore"),i=(0,f.getStore)("ActiveWorkspaceStore").id;return(0,f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.userCanCreateMonitor&&t.can("addMonitor","workspace",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_MONITOR)}},{label:"Mock Collection",isVisible(e){const t=(0,f.getStore)("PermissionStore"),i=(0,f.getStore)("ActiveWorkspaceStore").id;return(0,f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.userCanCreateMock&&t.can("addMock","workspace",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_MOCK)}},{label:"Create a fork",isVisible(){return(0,f.getStore)("OnlineStatusStore").userCanSaveAndSync},onClick(e){e.item.handleAction(_.ACTION_TYPE_FORK)}},{label:"Merge changes",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.isForked},onClick(e){e.item.handleAction(_.ACTION_TYPE_MERGE)}},{label:"Create Pull Request",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.isForked},onClick(e){e.item.handleAction(_.ACTION_TYPE_PULL_REQUEST)}},{label:"Rename",shortcut:"rename",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate},onClick(e){e.item.handleAction(_.ACTION_TYPE_RENAME_TOGGLE)}},{label:"Duplicate",shortcut:"duplicate",isVisible(){const e=(0,f.getStore)("PermissionStore"),t=(0,f.getStore)("ActiveWorkspaceStore").id;return(0,f.getStore)("OnlineStatusStore").userCanSave&&e.can("addCollection","workspace",t)},onClick(e){e.item.handleAction(_.ACTION_TYPE_DUPLICATE)}},{label:"Export",isVisible(e){const t=(0,f.getStore)("PermissionStore"),i=(0,E.decomposeUID)(e.item.id).modelId,{userCanSave:o}=(0,f.getStore)("OnlineStatusStore");return o&&t.can("view","collection",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_DOWNLOAD)}},{label:"Manage Roles",isVisible(){const e=(0,f.getStore)("CurrentUserStore");return(0,f.getStore)("OnlineStatusStore").userCanSave&&Boolean(e.team)},onClick(e){e.item.handleAction(_.ACTION_MANAGE_ROLES)}},{label:"Remove from workspace",isVisible(){const e=(0,f.getStore)("PermissionStore"),t=(0,f.getStore)("ActiveWorkspaceStore").id,i=(0,f.getStore)("SyncStatusStore").isSocketConnected;return(0,f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.can("removeCollection","workspace",t)&&i},onClick(e){e.item.handleAction(_.ACTION_REMOVE_FROM_WORKSPACE)}},{label:"Delete",shortcut:"delete",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanDelete},onClick(e){e.item.handleAction(_.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))(o=(0,r.DropTarget)(["collection-sidebar-request-item","collection-sidebar-folder-item"],{canDrop(e){return e.item.userCanUpdate},drop(e,t){const i=t.getItem().id,o=e.item.id;let s=!1;switch(t.getItem().type){case"folder":case"request":e.item.userCanUpdate&&(s=!0)}return i!==o&&s?{dropItem:{id:o,type:"collection"},position:"on"}:{}}},((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0}),canDrop:t.canDrop()})))(o=(0,r.DragSource)("collection-sidebar-collection-item",{canDrag(e){return!e.item._persistentState.isEditing&&(0,O.isWorkspaceMember)()},beginDrag(e){return{id:e.item.id,type:"collection"}}},((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(o=(0,l.observer)(o=class extends y.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this),this.handleToggleFavorite=this.handleToggleFavorite.bind(this)}getClasses(){return c()({"collection-sidebar-list-item__head":!0})}getHeadClasses(){return c()({"collection-sidebar-list-item__head__head":!0,"is-hovered":this.props.persistentState.dropdownOpen,"is-focused":this.isFocused(),"is-drop-hovered":this.props.item.userCanUpdate&&this.props.isDragOver,"is-favorited":this.isFavorite(),"is-open":this.isOpen()})}getActionsClasses(){return c()({"collection-sidebar-list-item__head__actions":!0,"is-selected":this.isExpanded()})}isExpanded(){return this.props.model.expandedItem===this.props.item.id}isFavorite(){return this.props.item.isFavorite}isOpen(){return this.props.model.isOpen(this.props.item.id)}isFocused(){return this.props.item.id===T.get(this.props.model,"activeItem.id")}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}handleToggleFavorite(e){e&&e.stopPropagation(),this.props.item.handleAction(_.ACTION_TYPE_FAVORITE)}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,item:o,persistentState:r}=this.props,n=!(0,f.getStore)("OnlineStatusStore").userCanSave,a=this.isOpen()?"down":"right";return super.render(this.getClasses(),t(i(e(s.createElement("div",{title:o.name,className:this.getHeadClasses(),onClick:this.onItemClick},s.createElement(h.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},s.createElement(p.default,{name:`icon-direction-${a}`,className:"pm-icon pm-icon-normal"})),s.createElement(b.default,{identifier:"head"},s.createElement("div",{className:"collection-sidebar-list-item__head__meta"},s.createElement("div",{className:"collection-sidebar-list-item__head__name__wrapper",title:o.name},s.createElement("div",{className:"collection-sidebar-list-item__head__name-icon__wrapper"},s.createElement(u.default,{className:"collection-sidebar-list-item__head__name",placeholder:"Collection Name",ref:this.setInlineInputRef,value:o.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}),s.createElement(m.default,{collection:o,userCanUpdate:o.userCanUpdate,showForkLabel:!0})),(r.isHovered||this.isFavorite())&&s.createElement(h.Button,{disabled:n,tooltip:n&&C.DISABLED_TOOLTIP_IS_OFFLINE,active:this.isFavorite(),className:"collection-sidebar-list-item__head__favorite-button",onClick:this.handleToggleFavorite},this.isFavorite()?s.createElement(p.default,{name:"icon-action-favorite-fill",className:"collection-sidebar-list-item__head__favorite-button-icon pm-icon pm-icon-secondary"}):s.createElement(p.default,{name:"icon-action-favorite-stroke",className:"pm-icon pm-icon-normal collection-sidebar-list-item__head__favorite-button-icon"}))))),s.createElement("div",{className:this.getActionsClasses()},s.createElement("div",{className:"collection-sidebar-list-item__head__action"},s.createElement(b.default,{identifier:"options"},s.createElement("div",{className:"collection-sidebar-dropdown-actions-wrapper"},(r.isHovered||r.dropdownOpen)&&s.createElement(I.default,{className:"collection-sidebar-actions-dropdown",onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle,actions:o.actions}))))))))))}})||o)||o)||o)||o;v.defaultProps={isEditing:!1,isDragOver:!1,setEditCache:T.noop,isContextMenuOpen:T.noop,editCache:null,connectDragSource:T.noop,connectDropTarget:T.noop,connectDragPreview:T.noop,canDrop:!1},v.propTypes={item:a().object.isRequired,model:a().instanceOf(S.default).isRequired,editCache:a().object,isEditing:a().bool,isDragOver:a().bool,setEditCache:a().func,isContextMenuOpen:a().func,connectDragSource:a().func,connectDropTarget:a().func,connectDragPreview:a().func,canDrop:a().bool}},6655:function(e,t,i){i.r(t);var o=i(1),s=i(2061),r=i.n(s),n=i(40);t.default=function(e){return o.createElement("div",{className:"collection-sidebar-list-item__loading"},n.times(e.depth,(t=>o.createElement("div",{key:`indent-${t}`,className:r()("collection-sidebar__indent",{"active-indent":t===Number(e.activeIndent.depth)&&e.activeIndent.show})}))),o.createElement("div",{className:"sidebar-loading-state--item"},o.createElement("div",{className:r()("has","sidebar-loading-state__icon")}),o.createElement("div",{className:"sidebar-loading-state__info"})))}},6649:function(e,t,i){i.r(t),i.d(t,{default:function(){return D}});var o,s=i(1),r=i(4),n=i(2061),a=i.n(n),l=i(2071),d=i.n(l),c=i(2846),p=i(2064),h=i(2057),u=i(3918),m=i(3004),g=i(5613),f=i(1773),b=i(2536),E=i(2491),I=i(6650),O=i(3819),C=i(6641),_=i(2049),S=i(6648),y=i(40);const T={canDrag(e){return!e.item._persistentState.isEditing&&((0,_.isWorkspaceMember)()&&e.collection.userCanUpdate)},beginDrag(e){return{id:e.item.id,type:"request",folder:e.item.folder,collection:e.item.collection}},endDrag(e,t){const i=t.getItem(),{dropItem:o,position:s}=t.getDropResult()||{};y.isUndefined(o)||e.onDragDrop(i,o,s)}},v={hover(e,t,i){const{persistentState:o}=e,s=t.getItem().id,n=e.item.id,a=t.getItem();let l=!1;if("response"!==a.type&&"request"!==a.type||(l=e.collection.userCanUpdate),s===n||!l)return{};const d=t.getClientOffset(),c=(0,r.findDOMNode)(i).getBoundingClientRect(),p=c.top+30-7.5,h=c.top+7.5;"response"!==t.getItem().type&&d.y>p?o.scheduleHoverUpdate("bottom"):"response"!==t.getItem().type&&d.y<h?o.scheduleHoverUpdate("top"):"request"!==t.getItem().type&&d.y<p&&d.y>h&&o.scheduleHoverUpdate("on")},drop(e,t,i){const o=t.getItem().id,s=e.item.id,n=t.getItem();let a=!1;if("request"!==n.type&&"response"!==n.type||(a=e.collection.userCanUpdate),o===s||!a)return{};const l=t.getClientOffset(),d=(0,r.findDOMNode)(i).getBoundingClientRect(),c=.25*d.height,p=d.bottom-c,h=d.top+c;let u="after";return"response"!==t.getItem().type&&l.y>p?u="after":"response"!==t.getItem().type&&l.y<h?u="before":"response"===t.getItem().type&&(u="on"),{dropItem:{id:e.item.id,type:"request",collection:e.item.collection},position:u}}};let D=(0,u.default)([{label:"Open in Tab",onClick(e){e.item.handleAction(O.ACTION_TYPE_OPEN,{},{preview:!1})}},{label:"Rename",shortcut:"rename",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(O.ACTION_TYPE_RENAME_TOGGLE)}},{label:"Duplicate",shortcut:"duplicate",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(O.ACTION_TYPE_DUPLICATE)}},{label:"Delete",shortcut:"delete",isVisible(e){return(0,f.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(O.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))(o=(0,c.DropTarget)(["collection-sidebar-request-item","collection-sidebar-response-item"],v,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})})))(o=(0,c.DragSource)("collection-sidebar-request-item",T,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(o=(0,h.observer)(o=class extends S.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return a()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__request":!0,"is-active":this.props.selected})}getHeadClasses(){return a()({"collection-sidebar-list-item__request__head":!0,"is-open":this.isOpen(),"is-hovered":this.props.persistentState.dropdownOpen,"is-selected":this.props.selected,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":this.props.persistentState.dropHoverBottom&&this.props.isDragOver,"is-right-above":this.props.persistentState.dropHover&&this.props.isDragOver})}isOpen(){return this.props.model.isOpen(this.props.item.id)}onItemClick(e){this.props.isContextMenuOpen()||super.onItemClick(e)}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,model:o,item:r,persistentState:n}=this.props,l=r.depth,d=Boolean(r.responses.size),c=o.isOpen(r.id)?"down":"right";return super.render(this.getClasses(),t(i(e(s.createElement("div",{title:r.name,className:this.getHeadClasses(),onClick:this.onItemClick},y.times(l,(e=>s.createElement("div",{key:`indent-${e}`,className:a()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),d?s.createElement(E.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},s.createElement(p.default,{name:`icon-direction-${c}`,className:"pm-icon pm-icon-normal"})):s.createElement("div",{className:"collection-sidebar-list__request-spacing"}),s.createElement(g.default,{method:r.method||"GET"}),s.createElement(b.default,{identifier:"head"},s.createElement("div",{className:"collection-sidebar-list-item__request__meta"},s.createElement(m.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__request__name",placeholder:"Request Name",ref:this.setInlineInputRef,value:r.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),s.createElement("div",{className:"collection-sidebar-list-item__request__actions"},(n.isHovered||n.dropdownOpen)&&s.createElement(b.default,{identifier:"requestOption"},s.createElement("div",{className:"collection-sidebar-request-dropdown-actions-wrapper"},s.createElement(I.default,{className:"collection-sidebar-request-actions-dropdown",actions:r.actions,onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle})))))))))}})||o)||o)||o)||o;D.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,selected:!1,isContextMenuOpen:y.noop,connectDragSource:y.noop,connectDropTarget:y.noop,connectDragPreview:y.noop},D.propTypes={collection:d().object.isRequired,item:d().object.isRequired,model:d().instanceOf(C.default).isRequired,activeIndent:d().object.isRequired,isFocused:d().bool,isDragOver:d().bool,isDragging:d().bool,selected:d().bool,isContextMenuOpen:d().func,connectDragSource:d().func,connectDropTarget:d().func,connectDragPreview:d().func}},6648:function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var o=i(1);i(6641);class s extends o.Component{constructor(e){super(e),this.inlineInputRef=null}UNSAFE_componentWillUpdate(e){if(!this.props.isFocused&&e.isFocused){if(!this.$node)return;this.$node.scrollIntoViewIfNeeded?this.$node.scrollIntoViewIfNeeded():this.$node.scrollIntoView&&this.$node.scrollIntoView()}}componentWillUnmount(){this.props.persistentState.cancelHoverUpdate(),this.is_editing_reaction_dispose&&this.is_editing_reaction_dispose(),this.props.persistentState.clearInputRef()}onInlineInputToggle(e){const{persistentState:t}=this.props;e?t.focusOnInput():t.clearEditStateCache()}onInlineInputSubmit(e){const{item:t}=this.props;t.commitRename(e)}onItemClick(e){const{item:t,model:i}=this.props;i.focusItem(t),!i.isOpen(t.id)&&i.expandItem(t),t.openInTab(e)}setInlineInputRef(e){this.props.persistentState.setInputRef(e)}handleMouseHover(e){this.props.persistentState.setHovered(e)}handleActionSelect(e){const{item:t}=this.props;t.handleAction(e)}handleDropdownToggle(e){this.props.persistentState.setDropdownOpen(e)}handleItemToggle(e){const{model:t,item:i}=this.props;e&&e.stopPropagation(),t.toggleItem(i)}showActiveIndent(e){const{show:t,depth:i}=this.props.activeIndent;return t&&e===Number(i)}render(e,t){const i=this.handleMouseHover.bind(this,!0),s=this.handleMouseHover.bind(this,!1);return o.createElement("div",{ref:e=>{this.$node=e},className:e,onMouseOver:i,onMouseLeave:s},t)}}s.defaultProps={isFocused:!1,activeIndent:{show:!1,depth:0}}},6656:function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var o,s=i(1),r=i(2057),n=i(2491),a=i(1773),l=i(1778),d=i(6657),c=i(2840),p=i(2049),h=(i(6641),i(3832)),u=i(3007),m=i(40);let g=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.state={isCollectionCreateEnabled:!0},this.handleNewCollectionClick=this.handleNewCollectionClick.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleNewCollectionClick(){this.setState({isCollectionCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isCollectionCreateEnabled:!0})}),1e3),(0,h.createCollection)()}handleTrashOpen(){if(!(0,p.isWorkspaceMember)()){if((0,p.canJoinWorkspace)())return pm.mediator.trigger("openUnjoinedWorkspaceModal");if(!(0,p.isLoggedIn)())return pm.mediator.trigger("showSignInModal",{type:"trash",origin:"open_trash"})}l.default.transitionTo("trash")}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const e=(0,a.getStore)("PermissionStore"),t=(0,a.getStore)("ActiveWorkspaceStore").id,i=e.can("addCollection","workspace",t),{userCanSave:o}=(0,a.getStore)("OnlineStatusStore"),r=o&&i&&this.state.isCollectionCreateEnabled;return s.createElement("div",{className:"collection-sidebar-menu"},s.createElement(d.default,{createNewConfig:{tooltip:o?i?"Create new collection":"You don't have permission to create a Collection in this workspace.":u.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!r,onCreate:this.handleNewCollectionClick,xPathIdentifier:"addCollection"},onSearch:this.handleSearchChange,searchQuery:m.get(this.props.model,"searchQuery"),moreActions:s.createElement(c.DropdownMenu,null,s.createElement(c.MenuItem,null,s.createElement(n.Button,{onClick:this.handleTrashOpen,tooltip:"You need to be in a workspace to open trash",disabled:!0,type:"text",className:"collection-sidebar-menu__actions-trash"},"Open Trash")))}))}})||o},6641:function(e,t,i){i.r(t),i.d(t,{CollectionModel:function(){return Z},FolderModel:function(){return ee},PersistentState:function(){return X},RequestModel:function(){return te},ResponseModel:function(){return ie},default:function(){return oe}});var o,s,r,n,a,l,d,c,p,h,u,m,g,f,b,E,I,O,C,_,S,y,T,v=i(960),D=i(1773),A=i(1665),P=i(6642),N=i(3982),w=i(3974),R=i(5915),L=i(5939),U=i(3820),F=i(3006),k=i(3832),x=i(3838),M=i(3808),q=i(3821),$=i(3819),Y=i(3840),H=i(3842),j=i(4147),z=i(40);function G(e,t,i,o){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}function V(e,t,i,o,s){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,o){return o(e,t,i)||i}),r),s&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(s):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const Q=300,B="loading";function W(){pm.toasts.error("You do not have permissions to perform this action")}function K(e){pm.toasts.error(`Could not move ${z.capitalize(e)} successfully`)}let X=(s=V((o=class{constructor(){G(this,"dropdownOpen",s,this),G(this,"dropHoverTop",r,this),G(this,"dropHoverBottom",n,this),G(this,"dropHover",a,this),G(this,"isHovered",l,this),this.isEditing=!1,this.editStateCache=null,this.inputRef=null,this._hoverUpdateAnimationFrame=null}clearEditStateCache(){this.editStateCache=null}getEditStateCacheValue(){return this.editStateCache.value}setHovered(e){this.isHovered=e}scheduleHoverUpdate(e){this._hoverUpdateAnimationFrame&&this.cancelHoverUpdate(),this._hoverUpdateAnimationFrame=requestAnimationFrame((()=>{try{"bottom"===e?this.dropHoverBottom||(0,v.runInAction)((()=>{this.dropHoverBottom=!0,this.dropHoverTop=!1,this.dropHover=!1})):"top"===e?this.dropHoverTop||(0,v.runInAction)((()=>{this.dropHoverBottom=!1,this.dropHoverTop=!0,this.dropHover=!1})):"on"===e?(0,v.runInAction)((()=>{this.dropHoverBottom=!1,this.dropHoverTop=!1,this.dropHover=!0})):(0,v.runInAction)((()=>{this.dropHoverBottom=!1,this.dropHoverTop=!1,this.dropHover=!1}))}finally{this._hoverUpdateAnimationFrame=null}}))}cancelHoverUpdate(){cancelAnimationFrame(this._hoverUpdateAnimationFrame)}setDropdownOpen(e){this.dropdownOpen=e}startEditing(){this.isEditing||(this.inputRef&&this.inputRef.startEditing(),this.isEditing=!0)}stopEditing(){this.isEditing&&(this.inputRef&&this.inputRef.stopEditing(),this.isEditing=!1)}setInputRef(e){e&&(this.inputRef=e,this.isEditing&&this.editStateCache&&this.inputRef.setEditState(this.editStateCache),this.clearEditStateCache())}clearInputRef(){this.isEditing&&this.inputRef&&(this.editStateCache=this.inputRef.getEditState()),this.inputRef=null}focusOnInput(){this.inputRef.focus(),this.inputRef.selectAll()}}).prototype,"dropdownOpen",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r=V(o.prototype,"dropHoverTop",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n=V(o.prototype,"dropHoverBottom",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=V(o.prototype,"dropHover",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=V(o.prototype,"isHovered",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V(o.prototype,"setHovered",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"setHovered"),o.prototype),V(o.prototype,"scheduleHoverUpdate",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"scheduleHoverUpdate"),o.prototype),V(o.prototype,"setDropdownOpen",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"setDropdownOpen"),o.prototype),o);function J(e){return class extends e{startRename(){this._persistentState.startEditing()}cancelRename(){this._persistentState.stopEditing()}commitCachedRename(){if(!this._persistentState.isEditing)return;if(this._persistentState.stopEditing(),z.isNil(this._persistentState.editStateCache))return;const e=this._persistentState.getEditStateCacheValue();this.commitRename(e)}dispose(){this.commitCachedRename(),z.isFunction(super.dispose)&&super.dispose()}}}let Z=(d=v.action.bound,c=v.action.bound,p=class extends(J(N.default)){constructor(e,t){super(e),this.depth=0,this.folders=v.observable.map([],{deep:!1}),this.requests=v.observable.map([],{deep:!1}),G(this,"attributes",h,this),this._persistentState=new X,this.update(e),this.$model=t,this.openInTab=z.debounce(this._openInTab,Q,{leading:!0})}update(e){super.update(e),z.has(e,"attributes")&&(this.attributes=e.attributes)}setFavorite(e){this.attributes&&this.attributes.flags&&(this.attributes.flags.isFavorite=e)}toggleIsFavorite(){const e=z.get(this.attributes,"flags.isFavorite");this.attributes&&this.attributes.flags&&(this.attributes.flags.isFavorite=!e)}commitRename(e){this.handleAction($.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t){if((0,k.collectionActionAllowedInWorkspace)(e)){if(e===$.ACTION_TYPE_DELETE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.userCanDelete?(0,k.deleteCollection)(this.id,{name:this.name}).then((e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_RENAME)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?(0,k.renameCollection)(this.id,t.name).then((()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_REMOVE_FROM_WORKSPACE)return(0,D.getStore)("OnlineStatusStore").userCanSaveAndSync?void pm.mediator.trigger("showRemoveFromWorkspaceModal",this.id,{type:U.COLLECTION,origin:"sidebar",disableDelete:!this.userCanDelete,disableShare:!this.userCanShare},(()=>{this.$model.focusPreviousItem(),this.$model.removeEntity(this),Y.default.closeByRoute(H.WORKFLOW_URL.OPEN_COLLECTION,{cid:this.id})})):(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_RENAME_TOGGLE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_DUPLICATE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?(0,k.duplicateCollection)(this.id,{origin:"sidebar"}):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_ADD_FOLDER){if(!(0,D.getStore)("OnlineStatusStore").userCanSave)return(0,F.showOfflineActionDisabledToast)();const{owner:e}=(0,A.decomposeUID)(this.id)||{},t="fakeId",i=(0,A.composeUID)(t,e),o={id:i,type:B,depth:1,order:[],foldersOrder:[],parent:this};this.folders.set(i,o),this.foldersOrder.push(t)}if(e===$.ACTION_TYPE_ADD_REQUEST){if(!(0,D.getStore)("OnlineStatusStore").userCanSave)return(0,F.showOfflineActionDisabledToast)();const{owner:e}=(0,A.decomposeUID)(this.id)||{},t="fakeId",i=(0,A.composeUID)(t,e),o={id:i,type:B,depth:1,responses:[],parent:this};this.requests.set(i,o),this.order.push(t)}return e===$.ACTION_TYPE_PULL_REQUEST?(0,D.getStore)("OnlineStatusStore").userCanSaveAndSync?this.isForked?(0,k.createPullRequest)(this.id,this.forkInfo):W():(0,F.showOfflineActionDisabledToast)():e===$.ACTION_TYPE_MERGE?(0,D.getStore)("OnlineStatusStore").userCanSaveAndSync?this.isForked?(0,k.mergeChanges)(this.id,this.forkInfo):W():(0,F.showOfflineActionDisabledToast)():void(0,k.collectionActions)(this.id,e,t,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.id,flags:z.get(this.attributes,"flags"),toggleIsFavorite:this.toggleIsFavorite})}}_openInTab(){(0,k.openCollectionInTab)(this.id)}get actions(){const e=(0,D.getStore)("PermissionStore"),t=(0,D.getStore)("CurrentUserStore"),i=(0,D.getStore)("ActiveWorkspaceStore").id,{userCanSave:o,userCanSaveAndSync:s}=(0,D.getStore)("OnlineStatusStore"),r=(0,A.decomposeUID)(this.id).modelId,n=(0,D.getStore)("CollectionStore").find(r);return[{type:$.ACTION_TYPE_SHARE,label:"Share collection",isEnabled:s&&this.userCanShare,xpathLabel:"share"},{type:$.ACTION_TYPE_RUN,label:"Run collection",isEnabled:(0,j.canRunCollection)(),xpathLabel:"runCollection"},{type:$.ACTION_TYPE_OPEN,label:o&&this.userCanUpdate?"Edit":"View details",isEnabled:!0,xpathLabel:"edit"},{type:$.ACTION_TYPE_ADD_REQUEST,label:"Add request",isEnabled:o&&this.userCanUpdate,xpathLabel:"addRequest"},{type:$.ACTION_TYPE_ADD_FOLDER,label:"Add folder",isEnabled:o&&this.userCanUpdate,xpathLabel:"addFolder"},{type:$.ACTION_TYPE_ADD_MONITOR,label:"Monitor collection",isEnabled:s&&this.userCanCreateMonitor&&e.can("addMonitor","workspace",i),xpathLabel:"monitor"},{type:$.ACTION_TYPE_ADD_MOCK,label:"Mock collection",isEnabled:s&&this.userCanCreateMock&&e.can("addMock","workspace",i),xpathLabel:"mock"},{type:$.ACTION_TYPE_FORK,label:"Create a fork",isEnabled:s,xpathLabel:"fork"},{type:$.ACTION_TYPE_PULL_REQUEST,label:"Create Pull Request",isEnabled:s&&this.isForked,xpathLabel:"pull-request"},{type:$.ACTION_TYPE_MERGE,label:"Merge changes",isEnabled:s&&this.isForked,xpathLabel:"merge"},{type:$.ACTION_VIEW_DOCUMENTATION,label:"View documentation",isEnabled:!1,xpathLabel:"documentation"},{type:$.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:o&&this.userCanUpdate,xpathLabel:"rename"},{type:$.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:o&&e.can("addCollection","workspace",i),xpathLabel:"duplicate"},{type:$.ACTION_TYPE_DOWNLOAD,label:"Export",isEnabled:o||n,xpathLabel:"export"},{type:$.ACTION_MANAGE_ROLES,label:"Manage roles",isEnabled:s&&!!t.team,xpathLabel:"manageRoles"},{type:$.ACTION_REMOVE_FROM_WORKSPACE,label:"Remove from workspace",isEnabled:s&&e.can("removeCollection","workspace",i),xpathLabel:"remove"},{type:$.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:o&&this.userCanDelete,xpathLabel:"delete"}]}get xpath(){return this.id}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===$.ACTION_TYPE_ADD_REQUEST||e===$.ACTION_TYPE_ADD_FOLDER?this.userCanUpdate:e===$.ACTION_TYPE_DOWNLOAD||(e===$.ACTION_TYPE_DELETE?this.userCanDelete:e===$.ACTION_TYPE_SHARE?this.userCanShare:e===$.ACTION_TYPE_RENAME?this.userCanUpdate:e!==$.ACTION_TYPE_RENAME_TOGGLE||this.userCanUpdate)}async placeNextTo(e,t,i){if(t.type!==i.type)return;const{modelId:o}=(0,A.decomposeUID)(i.id),{modelId:s}=(0,A.decomposeUID)(t.id),r="after"===e?1:-1;if(i.type===U.FOLDER){const e=[...this.foldersOrder].filter((e=>e!==o)),t=e.indexOf(s);return e.splice(t+r,0,o),(0,k.updateCollectionChildrenOrder)(this.id,{folders_order:e})}if(i.type===U.REQUEST){const e=[...this.order].filter((e=>e!==o)),t=e.indexOf(s);return e.splice(t+r,0,o),(0,k.updateCollectionChildrenOrder)(this.id,{order:e})}}},h=V(p.prototype,"attributes",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),V(p.prototype,"update",[v.action],Object.getOwnPropertyDescriptor(p.prototype,"update"),p.prototype),V(p.prototype,"setFavorite",[d],Object.getOwnPropertyDescriptor(p.prototype,"setFavorite"),p.prototype),V(p.prototype,"toggleIsFavorite",[c],Object.getOwnPropertyDescriptor(p.prototype,"toggleIsFavorite"),p.prototype),V(p.prototype,"handleAction",[v.action],Object.getOwnPropertyDescriptor(p.prototype,"handleAction"),p.prototype),p),ee=(V((u=class extends(J(w.default)){constructor(e,t){super(e),this.depth=0,this.folders=v.observable.map([],{deep:!1}),this.requests=v.observable.map([],{deep:!1}),this._persistentState=new X,this.$model=t,this.openInTab=z.debounce(this._openInTab,Q,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}get $index(){const{modelId:e}=(0,A.decomposeUID)(this.id);return this.$model.getParent(this).foldersOrder.indexOf(e)}commitRename(e){this.handleAction($.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t){if((0,x.folderActionAllowedInWorkspace)(e)){if(e===$.ACTION_TYPE_DELETE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?(0,x.deleteFolder)(this.id,{name:this.name,collectionId:this.collection}).then((e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_RENAME)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(0,x.renameFolder)(this.id,this.collection,t.name).then((()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_RENAME_TOGGLE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_DUPLICATE){if(!(0,D.getStore)("OnlineStatusStore").userCanSave)return(0,F.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return W();const e=this.$model.getParent(this),{owner:t}=(0,A.decomposeUID)(this.id)||{},i="fakeId",o=(0,A.composeUID)(i,t),s={id:o,type:B,depth:e.depth+1,order:[],foldersOrder:[],parent:e};return e.folders.set(o,s),e.foldersOrder.splice(this.$index+1,0,i),(0,x.duplicateFolder)(this.id,{parentModel:e.type,parentId:e.id})}if(e===$.ACTION_TYPE_ADD_FOLDER){if(!(0,D.getStore)("OnlineStatusStore").userCanSave)return(0,F.showOfflineActionDisabledToast)();const{owner:e}=(0,A.decomposeUID)(this.id)||{},t="fakeId",i=(0,A.composeUID)(t,e),o={id:i,type:B,depth:this.depth+1,order:[],foldersOrder:[],parent:this};this.folders.set(i,o),this.foldersOrder.push(t)}if(e===$.ACTION_TYPE_ADD_REQUEST){if(!(0,D.getStore)("OnlineStatusStore").userCanSave)return(0,F.showOfflineActionDisabledToast)();const{owner:e}=(0,A.decomposeUID)(this.id)||{},t="fakeId",i=(0,A.composeUID)(t,e),o={id:i,type:B,depth:this.depth+1,responses:[],parent:this};this.requests.set(i,o),this.order.push(t)}(0,x.folderActions)(this.id,e,t,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection})}}_openInTab(){(0,x.openFolderInTab)(this.id)}get actions(){const{userCanSave:e}=(0,D.getStore)("OnlineStatusStore");return[{type:$.ACTION_TYPE_OPEN,label:this.$collection.userCanUpdate?"Edit":"View Details",isEnabled:!0,xpathLabel:"edit"},{type:$.ACTION_TYPE_ADD_REQUEST,label:"Add Request",isEnabled:e&&this.$collection.userCanUpdate},{type:$.ACTION_TYPE_ADD_FOLDER,label:"Add Folder",isEnabled:e&&this.$collection.userCanUpdate},{type:$.ACTION_VIEW_DOCUMENTATION,label:"View Documentation",isEnabled:!1},{type:$.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate},{type:$.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate},{type:$.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate}]}get xpath(){return`${this.$model.getParent(this).xpath}/folder/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const i=this.$model.getModel(e.type).get(e.id),{owner:o}=(0,A.decomposeUID)(this.id)||{},s="fakeId",r=(0,A.composeUID)(s,o),n={id:r,type:B,depth:i.depth+1,order:[],foldersOrder:[],parent:i};i.folders.set(r,n),i.foldersOrder.push(s),t.foldersOrder.splice(this.$index,1),t.folders.delete(this.id),await(0,x.transferFolder)(this.id,e.type,e.id)}async reorder(e,t){const i=this.$model.getModel(e.type).get(e.id),o=this.$model.getParent(e),s=this.$model.getParent(this),r=this.$model.getParent(e),{owner:n,modelId:a}=(0,A.decomposeUID)(this.id)||{},l="fakeId",d=(0,A.composeUID)(l,n),c={id:d,type:B,depth:r.depth+1,order:[],foldersOrder:[],parent:r},p="before"===t?0:1,h=i.$index+p;r.folders.set(d,c),r.foldersOrder.splice(h,0,l),s.foldersOrder.splice(this.$index,1),s.folders.delete(this.id),(0,x.reorderFolder)(this.id,o.type,o.id,e.id,t).catch((0,v.action)((()=>{r.foldersOrder.splice(h,1),r.folders.delete(c.id),s.folders.set(this.id,this),s.foldersOrder.splice(this.$index,0,a),K(this.type)})))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:i}=(0,A.decomposeUID)(this.id)||{},o="fakeId",s=(0,A.composeUID)(o,i),r={id:s,type:B,depth:t.depth+1,order:[],foldersOrder:[],parent:t};t.folders.set(s,r),t.foldersOrder.push(o),await(0,x.copyFolderTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===$.ACTION_TYPE_ADD_REQUEST||e===$.ACTION_TYPE_ADD_FOLDER||e===$.ACTION_TYPE_DELETE||e===$.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==$.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}async placeNextTo(e,t,i){if(t.type!==i.type)return;const{modelId:o}=(0,A.decomposeUID)(i.id),{modelId:s}=(0,A.decomposeUID)(t.id),r="after"===e?1:-1;if(i.type===U.FOLDER){const e=[...this.foldersOrder].filter((e=>e!==o)),t=e.indexOf(s);return e.splice(t+r,0,o),(0,x.updateFolderChildrenOrder)(this.id,{folders_order:e})}if(i.type===U.REQUEST){const e=[...this.order].filter((e=>e!==o)),t=e.indexOf(s);return e.splice(t+r,0,o),(0,x.updateFolderChildrenOrder)(this.id,{order:e})}}}).prototype,"handleAction",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"handleAction"),u.prototype),V(u.prototype,"transfer",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"transfer"),u.prototype),V(u.prototype,"reorder",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"reorder"),u.prototype),V(u.prototype,"pasteTo",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"pasteTo"),u.prototype),u),te=(V((m=class extends(J(R.default)){constructor(e,t){super(e),this.depth=0,this.responses=v.observable.map([],{deep:!1}),this._persistentState=new X,this.$model=t,this.openInTab=z.debounce(this._openInTab,Q,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}get $index(){const{modelId:e}=(0,A.decomposeUID)(this.id);return this.$model.getParent(this).order.indexOf(e)}commitRename(e){this.handleAction($.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t,i){if((0,M.requestActionAllowedInWorkspace)(e)){if(e===$.ACTION_TYPE_DELETE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?(0,M.deleteRequest)(this.id,{name:this.name,collectionId:this.collection}).then((e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_RENAME)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(0,M.renameRequest)(this.id,this.collection,t.name).then((()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_RENAME_TOGGLE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):W():(0,F.showOfflineActionDisabledToast)();if(e===$.ACTION_TYPE_DUPLICATE){if(!(0,D.getStore)("OnlineStatusStore").userCanSave)return(0,F.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return W();const e=this.$model.getParent(this),{owner:t}=(0,A.decomposeUID)(this.id)||{},i="fakeId",o=(0,A.composeUID)(i,t),s={id:o,type:B,depth:e.depth+1,responses:[],parent:e};return e.requests.set(o,s),e.order.splice(this.$index+1,0,i),(0,M.duplicateRequest)(this.id,{parentModel:e.type,parentId:e.id})}(0,M.requestActions)(this.id,e,t,{...i||{},origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection})}}_openInTab(e){const t=e&&(e.metaKey||e.ctrlKey)&&e.shiftKey;(0,M.openRequestInTab)(this.id,{forceNew:t})}get actions(){const{userCanSave:e}=(0,D.getStore)("OnlineStatusStore");return[{type:$.ACTION_TYPE_ADD_EXAMPLE,label:"Add example",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:$.ACTION_TYPE_ADD_EXAMPLE},{type:$.ACTION_VIEW_DOCUMENTATION,label:"View Documentation",isEnabled:!1,xpathLabel:$.ACTION_VIEW_DOCUMENTATION},{type:$.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:$.ACTION_TYPE_RENAME_TOGGLE},{type:$.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:$.ACTION_TYPE_DUPLICATE},{type:$.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:$.ACTION_TYPE_DELETE}]}get xpath(){return`${this.$model.getParent(this).xpath}/request/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const i=this.$model.getModel(e.type).get(e.id),{owner:o}=(0,A.decomposeUID)(this.id)||{},s="fakeId",r=(0,A.composeUID)(s,o),n={id:r,type:B,depth:i.depth+1,responses:[],parent:i};return i.requests.set(r,n),i.order.push(s),t.order.splice(this.$index,1),t.requests.delete(this.id),(0,M.transferRequest)(this.id,e.type,e.id,t.type,t.id)}async reorder(e,t){const i=this.$model.getModel(e.type).get(e.id),o=this.$model.getParent(e),s=this.$model.getParent(this),r=this.$model.getParent(e),{owner:n,modelId:a}=(0,A.decomposeUID)(this.id)||{},l="fakeId",d=(0,A.composeUID)(l,n),c={id:d,type:B,depth:r.depth+1,responses:[],parent:r},p="before"===t?0:1,h=i.$index+p;r.requests.set(d,c),r.order.splice(h,0,l),s.order.splice(this.$index,1),s.requests.delete(this.id),(0,M.reorderRequest)(this.id,o.type,o.id,e.id,t).catch((0,v.action)((()=>{r.order.splice(h,1),r.requests.delete(c.id),s.requests.set(this.id,this),s.order.splice(this.$index,0,a),K(this.type)})))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:i}=(0,A.decomposeUID)(this.id)||{},o="fakeId",s=(0,A.composeUID)(o,i),r={id:s,type:B,depth:t.depth+1,responses:[],parent:t};t.requests.set(s,r),t.order.push(o),await(0,M.copyRequestTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===$.ACTION_TYPE_ADD_EXAMPLE||e===$.ACTION_TYPE_DELETE||e===$.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==$.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}}).prototype,"handleAction",[v.action],Object.getOwnPropertyDescriptor(m.prototype,"handleAction"),m.prototype),V(m.prototype,"transfer",[v.action],Object.getOwnPropertyDescriptor(m.prototype,"transfer"),m.prototype),V(m.prototype,"reorder",[v.action],Object.getOwnPropertyDescriptor(m.prototype,"reorder"),m.prototype),V(m.prototype,"pasteTo",[v.action],Object.getOwnPropertyDescriptor(m.prototype,"pasteTo"),m.prototype),m),ie=(g=class e extends(J(L.default)){constructor(e,t){super(e),this.depth=0,this._persistentState=new X,this.$model=t,this.method=e.method,this.openInTab=z.debounce(this._openInTab,Q,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}update(e){super.update(e),z.has(e,"method")&&(this.method=e.method)}commitRename(e){this.handleAction($.ACTION_TYPE_RENAME,{name:e})}async handleAction(t,i){if((0,q.exampleActionAllowedInWorkspace)(t)){if(t===$.ACTION_TYPE_DELETE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?(0,q.deleteExample)(this.id,{name:this.name,collectionId:this.collection}).then((e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))})).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",t,e)})):W():(0,F.showOfflineActionDisabledToast)();if(t===$.ACTION_TYPE_RENAME)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(0,q.renameExample)(this.id,this.collection,i.name).then((()=>{this.update({name:i.name}),pm.mediator.trigger("focusSidebar")})).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",t,e)})):W():(0,F.showOfflineActionDisabledToast)();if(t===$.ACTION_TYPE_RENAME_TOGGLE)return(0,D.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):W():(0,F.showOfflineActionDisabledToast)();if(t===$.ACTION_TYPE_DUPLICATE){if(!(0,D.getStore)("OnlineStatusStore").userCanSave)return(0,F.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return W();const{owner:t}=(0,A.decomposeUID)(this.id);return(0,q.duplicateExample)(this.id,{origin:"sidebar",collectionId:this.$collection.id}).then((i=>new e({...i,id:(0,A.composeUID)(i.id,t),request:this.request,collection:this.collection},this.$model)))}(0,q.exampleActions)(this.id,t,i,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection})}}_openInTab(){(0,q.openExampleInTab)(this.id)}get actions(){const{userCanSave:e}=(0,D.getStore)("OnlineStatusStore");return[{type:$.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:$.ACTION_TYPE_RENAME_TOGGLE},{type:$.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:$.ACTION_TYPE_DUPLICATE},{type:$.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:$.ACTION_TYPE_DELETE}]}get $index(){const e=this.$model.getParent(this);const{modelId:t}=(0,A.decomposeUID)(this.id);return e.responsesOrder.indexOf(t)}get xpath(){return`${this.$model.getParent(this).xpath}/response/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const i=this.$model.getModel(e.type).get(e.id),{owner:o}=(0,A.decomposeUID)(this.id)||{},s="fakeId",r=(0,A.composeUID)(s,o),n={id:r,type:B,depth:i.depth+1,parent:i};return i.responses.set(r,n),i.responsesOrder.push(s),t.responsesOrder.splice(this.$index,1),(0,q.transferResponse)(this.id,e.type,e.id,t.type,t.id)}async reorder(e,t){const i=this.$model.getModel(e.type).get(e.id),o=this.$model.getParent(e),s=this.$model.getParent(this),r=this.$model.getParent(e),{owner:n,modelId:a}=(0,A.decomposeUID)(this.id)||{},l="fakeId",d=(0,A.composeUID)(l,n),c={id:d,type:B,depth:r.depth+1,parent:r},p="before"===t?0:1,h=i.$index+p;r.responses.set(d,c),r.responsesOrder.splice(h,0,l),s.responsesOrder.splice(this.$index,1),(0,q.reorderResponse)(this.id,o.type,o.id,e.id,t).catch((0,v.action)((()=>{r.responsesOrder.splice(h,1),r.responses.delete(c.id),s.responses.set(this.id,this),s.responsesOrder.splice(this.$index,0,a),K(this.type)})))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:i}=(0,A.decomposeUID)(this.id)||{},o="fakeId",s=(0,A.composeUID)(o,i),r={id:s,type:B,depth:t.depth+1,parent:t};t.responses.set(s,r),t.responsesOrder.push(o),await(0,q.copyResponseTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===$.ACTION_TYPE_DELETE||e===$.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==$.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}},V(g.prototype,"handleAction",[v.action],Object.getOwnPropertyDescriptor(g.prototype,"handleAction"),g.prototype),V(g.prototype,"transfer",[v.action],Object.getOwnPropertyDescriptor(g.prototype,"transfer"),g.prototype),V(g.prototype,"reorder",[v.action],Object.getOwnPropertyDescriptor(g.prototype,"reorder"),g.prototype),V(g.prototype,"pasteTo",[v.action],Object.getOwnPropertyDescriptor(g.prototype,"pasteTo"),g.prototype),g),oe=(b=V((f=class{constructor(){G(this,"collections",b,this),G(this,"folders",E,this),G(this,"requests",I,this),G(this,"responses",O,this),this.clipboard=null,G(this,"activeItem",C,this),G(this,"openGroups",_,this),G(this,"filteredItems",S,this),G(this,"filteredOpenGroups",y,this),G(this,"searchQuery",T,this),this.previousQuery="",this.active_item_autorun_dispose=(0,v.autorun)((()=>{const{activeEditor:e}=(0,D.getStore)("ActiveWorkspaceSessionStore"),t=(0,D.getStore)("EditorStore").find(e);if(!t||!t.resource)return void this.resetFocus();let i,o;if(z.includes(t.resource,U.REQUEST)?(o=z.last(z.split(t.resource,"/")),i=U.REQUEST):z.includes(t.resource,U.COLLECTION)?(i=U.COLLECTION,o=z.last(z.split(t.resource,"/"))):z.includes(t.resource,U.FOLDER)?(o=z.last(z.split(t.resource,"/")),i=U.FOLDER):z.includes(t.resource,U.EXAMPLE)&&(o=z.last(z.split(t.resource,"/")),i=U.RESPONSE),!i||!o)return void this.resetFocus();const s=this.getModel(i).get(o);this.expandPath(s),this.focusItem(s)})),this.filter_item_autorun_dispose=(0,v.autorun)((()=>{this.setFilteredItems()}),{delay:300}),this.search_reaction_dispose=(0,v.reaction)((()=>(0,D.getStore)("ActiveWorkspaceSessionStore").workspace),(()=>{this.setSearchQuery("")}))}getModel(e){return e===U.COLLECTION?this.collections:e===U.FOLDER?this.folders:e===U.REQUEST?this.requests:e===U.RESPONSE?this.responses:new Map}getParent(e){return e.type===U.FOLDER||e.type===U.REQUEST?e.folder?this.folders.get(e.folder):this.collections.get(e.collection):e.type===U.RESPONSE?this.requests.get(e.request):null}getParentCollection(e){return this.collections.get(e.collection)}get filteredCollections(){const e=z.filter((0,v.values)(this.collections),(e=>this.isFiltered(e.id)&&!this.isArchived(e)&&this.isInActiveWorkspace(e.id)));return(0,P.sortCollections)(e)}get items(){const e=[];return z.forEach(this.filteredCollections,(t=>{e.push(t),this.isOpen(t.id)&&e.push(...this.orderItemsRecurse(t,1))})),e}get activeCollectionId(){if(!this.activeItem)return null;if(this.activeItem.type===U.COLLECTION)return this.activeItem.id;const e=this.getModel(this.activeItem.type).get(this.activeItem.id);return e&&e.collection}orderItemsRecurse(e,t){const i=[],o=e.folders&&e.folders.size,s=e.requests&&e.requests.size;if(!o&&!s)return[{type:"empty",depth:t}];const{owner:r}=(0,A.decomposeUID)(e.id);return z.forEach(e.foldersOrder,(o=>{const s=e.folders.get((0,A.composeUID)(o,r));if(!s)return void pm.logger.warn("CollectionSidebarModel~orderItemsRecurse","Item from folderOrder missing",o);if(!this.isFiltered(s.id))return;s.depth=t,i.push(s);const n=this.isOpen(s.id)&&this.orderItemsRecurse(s,t+1)||[];i.push(...n)})),z.forEach(e.order,(o=>{const s=e.requests.get((0,A.composeUID)(o,r));s?this.isFiltered(s.id)&&(s.depth=t,i.push(s),Boolean(s.responses.size)&&this.isOpen(s.id)&&(s.responses.forEach((e=>{e.depth=t+1})),z.forEach(s.responsesOrder,(e=>{const{modelId:t}=(0,A.decomposeUID)(e),o=(0,A.composeUID)(t,r);i.push(s.responses.get(o))})))):pm.logger.warn("CollectionSidebarModel~orderItemsRecurse","Item from folderOrder missing",o)})),i.filter(Boolean)}getCollectionAdapterModel(){const e=this;return{hydrate(t){e.hydrate(t)},add(t){e.addCollection(t)},update(t){e.updateCollection(t)},updateFavorite(t,i){e.collections.get(t).setFavorite(i)},remove(t){e.removeCollectionTree(t)},clear(){e.collections.clear()}}}getFolderAdapterModel(){const e=this;return{add(t){e.addFolder(t)},update(t){e.updateFolder(t)},remove(t){const i=e.folders.get(t);i&&e.removeEntity(i)},clear(){e.folders.clear()}}}getRequestAdapterModel(){const e=this;return{add(t){e.addRequest(t)},update(t){e.updateRequest(t)},remove(t){const i=e.requests.get(t);i&&e.removeEntity(i)},clear(){e.requests.clear()}}}getResponseAdapterModel(){const e=this;return{add(t){e.addResponse(t)},update(t){e.updateResponse(t)},remove(t){const i=e.responses.get(t);i&&e.removeEntity(i)},clear(){e.responses.clear()}}}addRefToParent(e){const t=e&&this.getParent(e);if(t)switch(e.type){case U.FOLDER:t.folders.set(e.id,e);break;case U.REQUEST:t.requests.set(e.id,e);break;case U.RESPONSE:t.responses.set(e.id,e)}}removeRefFromParent(e){const t=e&&this.getParent(e);if(t)switch(e.type){case U.FOLDER:t.folders.delete(e.id);break;case U.REQUEST:t.requests.delete(e.id);break;case U.RESPONSE:t.responses.delete(e.id)}}updateFoldersFromOrder(e){e.folders.clear(),z.forEach(e.foldersOrder,(t=>{const{owner:i}=(0,A.decomposeUID)(e.id)||{},o=(0,A.composeUID)(t,i),s=this.folders.get(o);s&&e.folders.set(o,s)}))}updateRequestsFromOrder(e){e.requests.clear(),z.forEach(e.order,(t=>{const{owner:i}=(0,A.decomposeUID)(e.id)||{},o=(0,A.composeUID)(t,i),s=this.requests.get(o);s&&e.requests.set(o,s)}))}addCollection(e){Array.isArray(e)||(e=[e]),this.updateCollectionTree(e)}updateCollection(e){Array.isArray(e)||(e=[e]),z.forEach(e,(e=>{const t=this.collections.get(e.id);t&&(t.update(e),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t))}))}addFolder(e){const t=new ee(e,this);this.addRefToParent(t),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t),this.folders.set(e.id,t)}updateFolder(e){const t=this.folders.get(e.id);t&&(t.update(e),this.addRefToParent(t),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t))}addRequest(e){const t=new te(e,this);this.addRefToParent(t),this.requests.set(e.id,t)}updateRequest(e){const t=this.requests.get(e.id);t&&(t.update(e),this.addRefToParent(t))}addResponse(e){const t=new ie(e,this);this.addRefToParent(t),this.responses.set(t.id,t)}updateResponse(e){const t=this.responses.get(e.id);t&&(t.update(e),this.addRefToParent(t))}updateCollectionTree(e){z.forEach(e,(e=>{const t=new Z(e,this);this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t),this.updateFolderTree(t,e.folders),this.updateRequestList(t,e.requests),this.collections.set(e.id,t)}))}updateFolderTree(e,t){z.forEach(t,(t=>{const i=new ee(t,this);this.updateFolderTree(i,t.folders),this.updateRequestList(i,t.requests),this.folders.set(t.id,i),e.folders.set(t.id,i)}))}updateRequestList(e,t){z.forEach(t,(t=>{const i=new te(t,this);this.updateResponseList(i,t.responses),this.requests.set(t.id,i),e.requests.set(t.id,i)}))}updateResponseList(e,t){z.forEach(t,(t=>{const i=new ie(t,this);this.responses.set(t.id,i),e.responses.set(t.id,i)}))}removeEntity(e){e&&(this.removeRefFromParent(e),this.removeTree(e))}removeTree(e){switch(e.type){case U.COLLECTION:e.folders.forEach((e=>this.removeTree(e))),e.folders.clear(),e.requests.forEach((e=>this.removeTree(e))),e.requests.clear(),this.collections.delete(e.id);break;case U.FOLDER:e.folders.forEach((e=>this.removeTree(e))),e.folders.clear(),e.requests.forEach((e=>this.removeTree(e))),e.requests.clear(),this.folders.delete(e.id);break;case U.REQUEST:e.responses.forEach((e=>this.removeTree(e))),e.responses.clear(),this.requests.delete(e.id);break;case U.RESPONSE:this.responses.delete(e.id)}}removeCollectionTree(e){z.forEach(e,(e=>{const t=this.collections.get(e);t&&this.removeTree(t)}))}clear(){(0,v.transaction)((()=>{this.collections.clear(),this.folders.clear(),this.requests.clear(),this.responses.clear()}))}hydrate(e){this.clear(),this.updateCollectionTree(e)}get hasFilterQuery(){return Boolean(this.searchQuery)}setSearchQuery(e){this.searchQuery=e}isFiltered(e){return!this.hasFilterQuery||this.filteredItems.has(e)}isArchived(e){return!e.isPublic&&e.isArchived}isInActiveWorkspace(e){return z.get((0,D.getStore)("ActiveWorkspaceStore"),"dependencies.collections",[]).includes(e)}flattenVisibleItem(e){if(!e)return;const t=this.getModel(e.type).get(e.id);let i=[];if(!t)return;if(this.isFiltered(e.id)&&i.push(t),e.type===U.RESPONSE||!this.isOpen(t.id))return i;const{owner:o}=(0,A.decomposeUID)(t.id);return e.type===U.REQUEST?t.responses.forEach((e=>{i=i.concat(this.flattenVisibleItem(e))})):(t.foldersOrder.forEach((e=>{const t=this.folders.get((0,A.composeUID)(e,o));i=i.concat(this.flattenVisibleItem(t))})),t.order.forEach((e=>{const t=this.requests.get((0,A.composeUID)(e,o));i=i.concat(this.flattenVisibleItem(t))}))),i}handleFilterChildren(e,t,i){if(!t||!i)return;const o=this.getModel(i).get(t);if(!o)return;const{owner:s}=(0,A.decomposeUID)(o.id)||{};z.forEach(o.order,(t=>{const i=(0,A.composeUID)(t,s);!e.has(i)&&e.set(i,!1)})),z.forEach(o.foldersOrder,(t=>{const i=(0,A.composeUID)(t,s);!e.has(i)&&e.set(i,!1),this.handleFilterChildren(e,i,U.FOLDER)}))}handleFilterParent(e,t,i){if(!t||!i)return;const o=this.getModel(i).get(t);if(!o)return;let s=this.getParent(o);const r=!this.filteredItems.get(t);for(;s;)!e.has(s.id)&&e.set(s.id,!1),r&&this.filteredOpenGroups.delete(s.id),s=this.getParent(s)}updateFilteredItems(e){this.filteredItems=e,this.filteredItems.forEach(((e,t)=>{!this.filteredOpenGroups.has(t)&&this.filteredOpenGroups.set(t,!0)}))}setFilteredItems(){const e=this.searchQuery,t=v.observable.map();if(!e)return void this.openGroups.clear();const i=z.toLower(e),o=(0,v.values)(this.collections),s=(0,v.values)(this.requests),r=(0,v.values)(this.folders),n=new Set;z.forEach(o,(e=>{z.includes(z.toLower(e.name),i)&&(t.set(e.id,!0),this.handleFilterChildren(t,e.id,U.COLLECTION)),n.add(e.id)})),z.forEach(s,(e=>{if(n.has(e.collection)){if(!z.includes(z.toLower(e.name),i))return;t.set(e.id,!0),this.handleFilterParent(t,e.id,U.REQUEST)}})),z.forEach(r,(e=>{if(n.has(e.collection)){if(!z.includes(z.toLower(e.name),i))return;t.set(e.id,!0),this.handleFilterChildren(t,e.id,U.FOLDER),this.handleFilterParent(t,e.id,U.FOLDER)}})),e!==this.previousQuery&&this.filteredOpenGroups.clear(),this.updateFilteredItems(t),this.previousQuery=e}expandPath(e){let t=e;for(;t&&t.type!==U.COLLECTION;){let e;e=t.request?this.requests.get(t.request):t.folder?this.folders.get(t.folder):this.collections.get(t.collection),e&&this.expandItem(e),t=e}}expandItem(e){this.openGroups.set(e.id,!0),this.hasFilterQuery&&this.filteredOpenGroups.set(e.id,!0)}collapseItem(e){this.openGroups.delete(e.id),this.hasFilterQuery&&this.filteredOpenGroups.set(e.id,!1)}toggleItem(e){if(!e)return;this.isOpen(e.id)?this.collapseItem(e):this.expandItem(e)}isFocused(e){return Boolean(this.activeItem&&this.activeItem.id===e)}focusItem(e){e&&(e instanceof Z||e instanceof ee||e instanceof te||e instanceof ie?(this.resetFocus(),this.activeItem=e):pm.logger.error("CollectionSidebarModel~focusItem - item not a know instance model",e.constructor.name))}resetFocus(){this.activeItem&&this.activeItem.dispose(),this.activeItem=null}isOpen(e){return Boolean(this.hasFilterQuery?this.filteredOpenGroups.get(e):this.openGroups.get(e))}focusPreviousCollection(){const{activeCollectionId:e}=this;if(!e)return;const t=this.filteredCollections.findIndex((t=>t.id===e)),i=t<=0?this.filteredCollections.length-1:t-1;this.focusItem(z.last(this.flattenVisibleItem(this.filteredCollections[i])))}focusNextCollection(){const{activeCollectionId:e}=this;if(!e)return;const t=this.filteredCollections.findIndex((t=>t.id===e));if(t<this.filteredCollections.length-1)return this.focusItem(this.filteredCollections[t+1]);this.focusItem(this.filteredCollections[0])}focusPreviousItem(){if(!this.activeItem)return;const{activeItem:e}=this,t=this.flattenVisibleItem({id:this.activeCollectionId,type:U.COLLECTION}),i=z.findIndex(t,(t=>t.id===e.id));i>0?this.focusItem(t[i-1]):this.focusPreviousCollection()}focusNextItem(){if(!this.activeItem)return;const{activeItem:e}=this,t=e.type===U.COLLECTION?e:e.$collection,i=this.flattenVisibleItem(t),o=z.findIndex(i,(t=>t.id===e.id));i&&(o<i.length-1?this.focusItem(i[o+1]):this.focusNextCollection())}copyItem(){this.activeItem&&(this.clipboard={item:this.activeItem,action:"copy"})}cutItem(){this.activeItem&&(this.clipboard={item:this.activeItem,action:"cut"})}async pasteItem(){if(!this.clipboard)return;let e=this.activeItem;const t=this.clipboard.item,i=this.clipboard.action;if(e&&t.type!==U.COLLECTION&&(t.type!==U.RESPONSE||e.type!==U.FOLDER&&e.type!==U.COLLECTION)&&(t.type!==U.FOLDER||e.type!==U.RESPONSE)){if(t.type===U.RESPONSE&&e.type===U.RESPONSE&&(e=this.getParent(e)),t.type!==U.RESPONSE&&e.type===U.REQUEST&&(e=this.getParent(e)),this.clearClipboard(),"cut"===i)return this.reorder(t,e,"on");if("copy"===i){const i=this.getModel(t.type).get(t.id),o=this.getModel(e.type).get(e.id);return i.pasteTo(o)}}}clearClipboard(){this.clipboard=null}async reorder(e,t,i){const o=this.getModel(e.type).get(e.id),s=this.getModel(t.type).get(t.id);"on"===i?await o.transfer&&o.transfer(s):"after"!==i&&"before"!==i||await o.reorder(s,i)}dispose(){this.activeItem&&this.activeItem.dispose(),this.active_item_autorun_dispose&&this.active_item_autorun_dispose(),this.filter_item_autorun_dispose&&this.filter_item_autorun_dispose(),this.search_reaction_dispose&&this.search_reaction_dispose()}}).prototype,"collections",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.observable.map([],{deep:!1})}}),E=V(f.prototype,"folders",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.observable.map([],{deep:!1})}}),I=V(f.prototype,"requests",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.observable.map([],{deep:!1})}}),O=V(f.prototype,"responses",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.observable.map([],{deep:!1})}}),C=V(f.prototype,"activeItem",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=V(f.prototype,"openGroups",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),S=V(f.prototype,"filteredItems",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),y=V(f.prototype,"filteredOpenGroups",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),T=V(f.prototype,"searchQuery",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V(f.prototype,"filteredCollections",[v.computed],Object.getOwnPropertyDescriptor(f.prototype,"filteredCollections"),f.prototype),V(f.prototype,"items",[v.computed],Object.getOwnPropertyDescriptor(f.prototype,"items"),f.prototype),V(f.prototype,"activeCollectionId",[v.computed],Object.getOwnPropertyDescriptor(f.prototype,"activeCollectionId"),f.prototype),V(f.prototype,"addRefToParent",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"addRefToParent"),f.prototype),V(f.prototype,"removeRefFromParent",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"removeRefFromParent"),f.prototype),V(f.prototype,"updateFoldersFromOrder",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateFoldersFromOrder"),f.prototype),V(f.prototype,"updateRequestsFromOrder",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateRequestsFromOrder"),f.prototype),V(f.prototype,"addCollection",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"addCollection"),f.prototype),V(f.prototype,"updateCollection",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateCollection"),f.prototype),V(f.prototype,"addFolder",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"addFolder"),f.prototype),V(f.prototype,"updateFolder",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateFolder"),f.prototype),V(f.prototype,"addRequest",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"addRequest"),f.prototype),V(f.prototype,"updateRequest",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateRequest"),f.prototype),V(f.prototype,"addResponse",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"addResponse"),f.prototype),V(f.prototype,"updateResponse",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateResponse"),f.prototype),V(f.prototype,"updateCollectionTree",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateCollectionTree"),f.prototype),V(f.prototype,"updateFolderTree",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateFolderTree"),f.prototype),V(f.prototype,"updateRequestList",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateRequestList"),f.prototype),V(f.prototype,"updateResponseList",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateResponseList"),f.prototype),V(f.prototype,"removeEntity",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"removeEntity"),f.prototype),V(f.prototype,"removeTree",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"removeTree"),f.prototype),V(f.prototype,"removeCollectionTree",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"removeCollectionTree"),f.prototype),V(f.prototype,"clear",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"clear"),f.prototype),V(f.prototype,"hasFilterQuery",[v.computed],Object.getOwnPropertyDescriptor(f.prototype,"hasFilterQuery"),f.prototype),V(f.prototype,"setSearchQuery",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"setSearchQuery"),f.prototype),V(f.prototype,"handleFilterChildren",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"handleFilterChildren"),f.prototype),V(f.prototype,"handleFilterParent",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"handleFilterParent"),f.prototype),V(f.prototype,"updateFilteredItems",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"updateFilteredItems"),f.prototype),V(f.prototype,"expandItem",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"expandItem"),f.prototype),V(f.prototype,"collapseItem",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"collapseItem"),f.prototype),V(f.prototype,"toggleItem",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"toggleItem"),f.prototype),V(f.prototype,"focusItem",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"focusItem"),f.prototype),V(f.prototype,"resetFocus",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"resetFocus"),f.prototype),V(f.prototype,"focusPreviousCollection",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"focusPreviousCollection"),f.prototype),V(f.prototype,"focusNextCollection",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"focusNextCollection"),f.prototype),V(f.prototype,"focusPreviousItem",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"focusPreviousItem"),f.prototype),V(f.prototype,"focusNextItem",[v.action],Object.getOwnPropertyDescriptor(f.prototype,"focusNextItem"),f.prototype),f)},6640:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var o,s=i(1),r=i(2057),n=i(2536),a=(i(6641),i(5600)),l=i(6643),d=i(6656),c=i(4105),p=i(6659),h=i(40);let u=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.focusCollection=this.focusCollection.bind(this),this.focusNext=this.focusNext.bind(this),this.listRef=null}getView(){const{model:e,status:t}=this.props.controller||{};return t===c.ERROR?s.createElement(p.default,{title:"Couldn’t load collections",description:"Try refreshing this page or check back in some time"}):t===c.READY?s.createElement(n.default,{identifier:"collection"},s.createElement(l.default,{ref:e=>{this.listRef=e},model:e})):s.createElement(a.default,{hasIcon:!0})}focus(){h.invoke(this,"listRef.__wrappedInstance.focus")}focusCollection(e,t){h.invoke(this,"listRef.__wrappedInstance.focusCollection",e,t)}focusNext(){const e=h.head(h.get(this.props.controller,"model.collections"));h.invoke(this,"listRef.handleSelect",e.id)}render(){const{model:e}=this.props.controller||{};return s.createElement("div",{className:"collection-sidebar"},s.createElement("div",{className:"collection-sidebar-wrapper"},s.createElement(d.default,{model:e}),this.getView()))}})||o},6652:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var o,s=i(1),r=i(2057),n=i(1773),a=i(3215),l=i(3819),d=i(3007),c=i(40);let p=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.getDisabledText=this.getDisabledText.bind(this)}getDisabledText(e){if(e)return(0,n.getStore)("OnlineStatusStore").userCanSave?d.DISABLED_TOOLTIP_NO_PERMISSION:d.DISABLED_TOOLTIP_IS_OFFLINE}getKeymapHandlers(){return{rename:pm.shortcuts.handle("rename",this.handleShortcutSelect.bind(this,l.ACTION_TYPE_RENAME_TOGGLE)),duplicate:pm.shortcuts.handle("duplicate",this.handleShortcutSelect.bind(this,l.ACTION_TYPE_DUPLICATE)),delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,l.ACTION_TYPE_DELETE))}}handleShortcutSelect(e){this.props.onSelect&&this.props.onSelect(e)}render(){return s.createElement(a.EntityActionsDropdown,{dropdownClassName:this.props.className,actions:this.props.actions,keymapHandlers:this.getKeymapHandlers(),onSelect:this.props.onSelect,onToggle:this.props.onToggle,getDisabledText:this.getDisabledText})}})||o;p.defaultProps={onToggle:c.noop,className:null}},6650:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var o,s=i(1),r=i(2057),n=i(1773),a=i(3215),l=i(3819),d=i(3007),c=i(3992),p=i(40);let h=(0,r.observer)(o=class extends s.Component{constructor(e){super(e),this.getDisabledText=this.getDisabledText.bind(this)}getDisabledText(e,t){if(e)return t===l.ACTION_VIEW_DOCUMENTATION?c.DISABLED_IN_SCRATCHPAD_TOOLTIP:(0,n.getStore)("OnlineStatusStore").userCanSave?d.DISABLED_TOOLTIP_NO_PERMISSION:d.DISABLED_TOOLTIP_IS_OFFLINE}getKeymapHandlers(){return{rename:pm.shortcuts.handle("rename",this.handleShortcutSelect.bind(this,l.ACTION_TYPE_RENAME_TOGGLE)),duplicate:pm.shortcuts.handle("duplicate",this.handleShortcutSelect.bind(this,l.ACTION_TYPE_DUPLICATE)),delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,l.ACTION_TYPE_DELETE))}}handleShortcutSelect(e){this.props.onSelect&&this.props.onSelect(e)}render(){return s.createElement(a.EntityActionsDropdown,{dropdownClassName:this.props.className,actions:this.props.actions,keymapHandlers:this.getKeymapHandlers(),onSelect:this.props.onSelect,onToggle:this.props.onToggle,getDisabledText:this.getDisabledText})}})||o;h.defaultProps={onToggle:p.noop,className:null}}}]);