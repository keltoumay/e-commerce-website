"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[25],{6670:function(e,t,r){r.r(t);var n=r(5983);t.default={exportSingle:n.default}},6665:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var n=r(1656),o=r(1685),a=r(3959),i=r(1755),l=r(40),s=r(5);function u(e){e=decodeURIComponent(e);var t,r=a.default.getHashVars(e);l.each(r,(function(e){var r=decodeURIComponent(e.key);if(0==r.indexOf("env[")&&"]"==r[r.length-1])try{var a="";try{a=atob(e.value)}catch(t){if(!l.endsWith(e.value,'"'))throw t;e.value=e.value.substring(0,e.value.length-1),a=atob(e.value)}var u=r.substring(4,r.length-1),c=JSON.parse(a),d=[];if(c instanceof Array){var p=c.length;for(t=0;t<p;t++)d.push(l.assign({type:"text",enabled:!0},c[t]))}else l.forOwn(c,(function(e,t){d.push({key:t,value:e,type:"text",enabled:!0})}));i.default.get().then((e=>{let t={name:"create",namespace:"environment",data:{id:o.default.guid(),name:u,values:d,owner:e.id}};(0,n.default)(t),pm.toasts.success("Environment "+u+" imported")})).catch((e=>{pm.logger.error("Error in creating evironment",e)}))}catch(e){s.log("Could not import environment")}}))}},6666:function(e,t,r){r.r(t),r.d(t,{default:function(){return s}});var n=r(6664),o=r(1647),a=r(1685),i=r(3959),l=r(40);function s(e){n.default.importFileFromUrl(e,((t,r)=>{if(t)return pm.logger.error(t);n.default.checkImportEnvironmentFromUrl(e);var s=i.default.getUrlVars(e),u=l.find(s,(function(e){return"referrer"===e.key})),c=u?decodeURIComponent(u.value):"";o.default.addEvent("collection","create","run_button",null,{referrer:c,collection_id:r.id,collection_link_id:a.default.getCollectionLinkId(e)})}))}},6667:function(e,t,r){r.r(t),r.d(t,{default:function(){return s},parseUrlData:function(){return u}});var n=r(40),o=r.n(n),a=r(5368),i=(r(1685),r(1767)),l=(r(1681),r(5));function s(e,t){i.default.request(e).then((({body:r})=>{try{a.default.importData(r,{origin:"import/link",link:e}).then((()=>{o().isFunction(t)&&t(null,r)}))}catch(e){"Could not parse"==e?(pm.mediator.trigger("failedCollectionImport","format not recognized"),o().isFunction(t)&&t("format not recognized")):(pm.mediator.trigger("failedCollectionImport","Could not import: "+e),o().isFunction(t)&&t("Could not import: "+e))}})).catch((({error:e})=>{l.log("Error response while importing: ",e),pm.mediator.trigger("failedCollectionImport","Error response received from URL. Check the console for more."),o().isFunction(t)&&t("Error response received from URL. Check the console for more.")}))}function u(e,t=!0){return i.default.request(e).then((({body:e})=>e)).catch((({error:e})=>(pm.logger.warn("Error while parsing url data: ",e),t&&pm.toasts.error("Error while fetching data from link."),null)))}},6668:function(e,t,r){r.r(t),r.d(t,{default:function(){return i}});r(40);var n=r(5368),o=r(812),a=r.n(o);function i(e,t,r){a().eachSeries(e,((o,a)=>{let i=new FileReader;i.onload=function(o){var i=o.currentTarget.result;if("importByFileContainer"===t&&r&&1===e.length)return r(i,{origin:"import/file"});n.default.importData(i,{origin:"import/file"},a)},i.readAsText(o)}))}},6664:function(e,t,r){r.r(t);var n=r(6665),o=r(6666),a=r(4378),i=r(6667),l=r(6668),s=r(5377),u=r(6669),c=r(5369),d=r(812),p=r.n(d),f=r(4147),m=r(40);function v(e,t){e?e.isUserFriendly?pm.toasts.error(e.message,{dedupeId:"failed-collection-import"}):pm.toasts.error("Failed to import collection "+t.name,{dedupeId:"failed-collection-import"}):pm.toasts.success("Collection "+t.name+" imported")}t.default={checkImportEnvironmentFromUrl:n.default,importCollectionAndEnvironment:o.default,importData:async function(e,t,r){if(m.isEmpty(e))return m.isFunction(r)&&r();p().series([r=>{c.default.importCollections(e.collections,t,v,(e=>{r(null,e)}))},r=>{c.default.importGlobals(e.globals,m.pick(t,["activeWorkspace","silentToasts"]),(e=>{r(null,e)}))},r=>{c.default.importHeaderPresets(e.headerPresets,m.pick(t,["currentUserID","activeWorkspace","silentToasts"]),(e=>{r(null,e)}))},r=>{c.default.importEnvironments(e.environments,m.pick(t,["currentUserID","silentToasts","activeWorkspace"]),(e=>{r(null,e)}))},t=>{c.default.importRequests(e.requests,(e=>{t(null,e)}))},r=>{c.default.importCollectionRuns(e.runsInfo,e.events,t,f.handleCollectionRunImportStatus,(e=>{r(null,e)}))}],((e,t)=>{let n={};m.forEach(m.compact(t),(e=>{n[e.type]=m.pick(e,["total","imported","failed"])})),m.isFunction(r)&&r(n)}))},convertRawData:a.default,importDataAs:a.importDataAs,stringify:a.stringify,importFileFromUrl:i.default,parseUrlData:i.parseUrlData,importFiles:l.default,importFolder:s.default,saveEntity:u.default}},6669:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(4148),o=r(6670),a=r(1647),i=r(5979),l=r(40),s=r(5);const u={json:"application/json"},c="\t",d="collection",p="environment",f="globals",m=".json";function v(e,t={}){let r,v,h,g=t.type,y=l.get(t,"outputVersion","2.1.0");if(g)return o.default.exportSingle(g,e,t).then((e=>{if(!(e&&u[e.type]&&e[e.type]))throw s.warn("Invalid data or unsupported file type",e),new Error("saveEntity: invalid data received");return e})).then((e=>{r=e,v=u[r.type],h=l.get(r,"meta.fileName",g+m)})).then((()=>JSON.stringify(r.json,null,c))).then((e=>new Promise(((t,r)=>{(0,n.saveAndOpenFile)(h,e,v,((e,n)=>{if(e)return s.warn("Error while saving the exported entity",e),void r(e);t(n)}))})))).then((t=>{if(t!==i.EXPORT_STATE.SUCCESS)return;switch(g){case d:a.default.addEvent(d,"download",y,null,{collection_id:e.id}),pm.toasts.success("Your collection was exported successfully.");break;case p:a.default.addEvent(g,"download"),pm.toasts.success("Your environment was exported successfully.");break;case f:a.default.addEvent(g,"download"),pm.toasts.success("Your globals were exported successfully.")}})).catch((r=>{pm.toasts.error("Unable to export this entity. Please check the DevTools."),s.warn("Error while exporting an entity",e,t,r)}));s.warn(`Unsupported type '${g}' for exporting`)}}}]);